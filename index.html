<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Emmilia&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="A Rabbit!">
<meta property="og:type" content="website">
<meta property="og:title" content="Emmilia&#39;s blog">
<meta property="og:url" content="https://kitel.top/index.html">
<meta property="og:site_name" content="Emmilia&#39;s blog">
<meta property="og:description" content="A Rabbit!">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Emmilia">
<meta property="article:tag" content="huan">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Emmilia&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
        <a href="/" class="profilepic">
            
            <img lazy-src="img/head.jpg" class="js-avatar">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Emmilia</a></h1>
        </hgroup>
        
        <p class="header-subtitle">谁说这样不伟大呢。</p>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="local-search-input" placeholder="搜索一下" autocomplete="off">
            </form>
            <div id="local-search-result"></div>
        
        
            <script type="text/javascript">
                (function() {
                    'use strict';
                    function getMatchData(keyword, data) {
                        var matchData = [];
                        for(var i =0;i<data.length;i++){
                            if(data[i].title.toLowerCase().indexOf(keyword)>=0) 
                                matchData.push(data[i])
                        }
                        return matchData;
                    }
                    var $input = $('#local-search-input');
                    var $resultContent = $('#local-search-result');
                    $input.keyup(function(){
                        $.ajax({
                            url: '/search.json',
                            dataType: "json",
                            success: function( json ) {
                                var str='<ul class=\"search-result-list\">';                
                                var keyword = $input.val().trim().toLowerCase();
                                $resultContent.innerHTML = "";
                                if ($input.val().trim().length <= 0) {
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                }
                                var results = getMatchData(keyword, json);
                                if(results.length === 0){
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                } 
                                for(var i =0; i<results.length; i++){
                                    str += "<li><a href='"+ results[i].url +"' class='search-result-title'>"+ results[i].title +"</a></li>";
                                }
                                str += "</ul>";
                                $resultContent.empty();
                                $resultContent.append(str);
                                $('#switch-area').hide();
                            }
                        });
                    });
                })();
            </script>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        
        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a  href="http://kitel.top">博客首页</a></li>
                        
                            <li><a  href="/archives">文章归档</a></li>
                        
                            <li><a  href="/CTFStudy">学习导航</a></li>
                        
                            <li><a  href="/PWNABLE">PWNABLE</a></li>
                        
                            <li><a  href="/resume">个人简历</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail"  target="_blank" href="https://mail.qq.com/cgi-bin/frame_html?sid=RufsF6OkAPYKjANj&url=%2Fcgi-bin%2Fmail_list%3Fsid%3DRufsF6OkAPYKjANj%26topmails%3D0&r=adeec2d1adab1ca088b2d65b29dfff54" title="mail">mail</a>
                            
                                <a class="fl github"  target="_blank" href="https://github.com/autjuly" title="github">github</a>
                            
                                <a class="fl zhihu"  target="_blank" href="https://www.zhihu.com/people/shi-huang-shan" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo"  target="_blank" href="https://weibo.com/u/5902437462/home" title="weibo">weibo</a>
                            
                                <a class="fl rss"  target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 20px;">学习笔记</a> <a href="/tags/%E5%AE%98%E6%96%B9%E2%91%A7%E2%91%A7/" style="font-size: 10px;">官方⑧⑧</a> <a href="/tags/%E5%B0%8F%E7%99%BD%E6%AC%A2/" style="font-size: 15px;">小白欢</a>
                    </div>
                </section>
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://wangdashuaidashuaiwang.github.io/">Wjbt</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://whyxiaoming.github.io/">小明</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://gzh517.github.io/">GZH</a>
                    
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">一个默默学习的气氛组小透明</div>
                </section>
                
            </div>
        </div>
    </header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">Emmilia</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">Emmilia</a></h1>
            </hgroup>
            
            <p class="header-subtitle">谁说这样不伟大呢。</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="http://kitel.top">博客首页</a></li>
                
                    <li><a href="/archives">文章归档</a></li>
                
                    <li><a href="/CTFStudy">学习导航</a></li>
                
                    <li><a href="/PWNABLE">PWNABLE</a></li>
                
                    <li><a href="/resume">个人简历</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="https://mail.qq.com/cgi-bin/frame_html?sid=RufsF6OkAPYKjANj&url=%2Fcgi-bin%2Fmail_list%3Fsid%3DRufsF6OkAPYKjANj%26topmails%3D0&r=adeec2d1adab1ca088b2d65b29dfff54" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/autjuly" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/shi-huang-shan" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="https://weibo.com/u/5902437462/home" title="weibo">weibo</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-React-beautiful-dnd学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/React-beautiful-dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
      <time datetime="2022-10-14T02:23:48.930Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/React-beautiful-dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">React-beautiful-dnd学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="React-beautiful-dnd学习笔记"><a href="#React-beautiful-dnd学习笔记" class="headerlink" title="React-beautiful-dnd学习笔记"></a>React-beautiful-dnd学习笔记</h3><h4 id="学习困难"><a href="#学习困难" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>结构</strong><ul>
<li><strong>DragDropContext：</strong>构建一个可以拖拽的范围，即最外层包裹拖拽区域的wrap；</li>
<li><strong>Droppable：</strong>某个包含若干个可拖拽元素的组；</li>
<li><strong>Draggable：</strong>可以被拖拽的元素。</li>
</ul>
</li>
</ul>
<p><img src="/2022/10/14/React-beautiful-dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDefR6SgR_VLNAebNAuo_746_486.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>使用</strong><ul>
<li><strong>引入 react-beautiful-dnd: npm i react-beautiful-dnd</strong></li>
<li><strong>我的源代码结构：</strong></li>
</ul>
</li>
</ul>
<p><img src="/2022/10/14/React-beautiful-dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDe7s5nOyPLrNAdvNA78_959_475.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>按照上图改成用拖拽包裹之后：</strong></li>
</ul>
<p><img src="/2022/10/14/React-beautiful-dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDetfZ9SeG0nNBSLNBUo_1354_1314.png_720x10000.jpg" alt="img"></p>
<p>可以看到，在最外层的 my-demo 盒子外部套了一层 DragDropContext 作为容器；Droppable 在包裹的map的 demo-list 之外；最内层则是每一个可以被拖拽的元素实例 list ，被 map -&gt; Draggable -&gt; list 层层包裹。</p>
<p><img src="/2022/10/14/React-beautiful-dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDf0i4Qy2ub_NAjLNAmk_617_562.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>注意</strong></li>
</ul>
<ol>
<li><strong>DragDropContext 可选5个函数作为参数</strong></li>
</ol>
<p>onBeforeCapture / onBeforeDragStart / onDragStart / onDragUpdate / onDragEnd，其中用户拖拽改变的结果一定要写在 onDragEnd 中，传递改变后的 state 给 react，否则拖拽在松开鼠标后会恢复到拖拽之前的顺序。比如在 onDragEnd 中写重新排序函数，最重要的就是 source + destination，里面有我们原来的位置和拖拽之后的位置，利用这两个index拿到源item并调整目标位置。</p>
<ol start="2">
<li><strong>Droppable 和 Draggable 结构的 props</strong></li>
</ol>
<ul>
<li>第二层结构需要添加 droppableId 和 方向，水平为horizontal，竖直方向为vertical</li>
</ul>
<Droppable droppableid="mymodal" direction="horizontal">

<ul>
<li>第三层结构需要添加 draggableId 和 index 以及 key，这几个都是用于区分不同项的手段。</li>
</ul>
<p>draggableId={item.name} index={index} key={item.name}</p>
<ol start="3">
<li><strong>Droppable和Draggable结构内包的 箭头函数 及 div内的参数</strong></li>
</ol>
<p>二层和三层包裹的必须是一个返回原本html结构的函数， provided是官方提供的参    数，里面包含着拖拽一系列参数，事件监听等。</p>
<ul>
<li>第二层 div：</li>
</ul>
<p>​    ref={provided.innerRef}</p>
<p>​    {…provided.droppableProps}</p>
<ul>
<li>第三层 div：</li>
</ul>
<p>​    ref={provided.innerRef}</p>
<p>​    {…provided.draggableProps}</p>
<p>​    {…provided.dragHandleProps}</p>
<ol start="4">
<li><strong>在map结束到 Droppable结束 之间的位置放一个 {provided.placeholder}，用于为拖动的元素占位。</strong></li>
</ol>
<p><img src="/2022/10/14/React-beautiful-dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDeREaosAK0FozQGE_388_104.png_720x10000.jpg" alt="img"> </p>
<ol start="5">
<li><strong>报错：Unable to find draggable with id: xxx</strong></li>
</ol>
<p>​    报错原因是因为在 index.js 中 React18 采用了严格模式(&lt;React.StrictMode&gt;)，将其删除就可以拖拽啦。</p>
<h4 id="学习心得与感悟"><a href="#学习心得与感悟" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>昨天学习的 react-dnd 与今天学习的 react-beautiful-dnd 虽然都是制作拖拽组件的三方库，但是却有很大的不同。首先就是API完全不一样，比如 react-dnd 主要用的是 DndProvider、useDrag、useDrop，而 react-beautiful-dnd 主要用的是 DragDropContext、Droppable、Draggable；除此之外，当然就是用法的不一样，react-dnd 相比之下还多了 manager、monitor、collect等等一系列的概念；参数的不同也是他们之间的差别。不过总的来说，我觉得 react-beautiful-dnd 更适合新手，比较容易上手，就是用的人好像不多，踩坑的时候不太好找解决方案；相比之下 react-dnd 的社区可能比较大一点，虽然没那么好上手，但是比较‘专业’。感觉就像 react 和 vue 的区别，一个适合大项目比较好维护、社区人数多，一个适合小项目比较容易上手开发、社区人数少。</p>
</Droppable>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-React-Dnd学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
      <time datetime="2022-10-14T02:20:52.664Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">React-Dnd学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="React-dnd学习笔记"><a href="#React-dnd学习笔记" class="headerlink" title="React-dnd学习笔记"></a>React-dnd学习笔记</h3><ul>
<li><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a><strong>概念</strong></h4></li>
</ul>
<p>React DnD 是一组 React 高阶组件，使用的时候只需要使用对应的 API 将目标组件进行包裹，即可实现拖动或接受拖动元素的功能。将拖动的事件转换成对象中对应状态的形式，不需要开发者自己判断拖动状态，只需要在传入的 spec 对象中各个状态属性中做对应处理即可。</p>
<p><strong>Manager</strong></p>
<p>Manager是DnD中非常重要的角色，内部保存了store、monitor和backend，Manager作为入口，对外暴露三者，会订阅store，并调用Backend的setup（负责注册拖拽相关一系列的事件）或teardown（销毁拖拽事件）。</p>
<p><strong>Backends</strong></p>
<p>React DnD 抽象了后端的概念，我们可以使用 HTML5 拖拽后端，也可以自定义 touch、mouse 事件模拟的后端实现，后端主要用来抹平浏览器差异，处理 DOM 事件，同时把 DOM 事件转换为 React DnD 内部的 redux action。主要注册了拖拽相关的监听器，对外提供了dom（drag、preview和drop）注入方法。</p>
<p><strong>Item</strong></p>
<p>React DnD 基于数据驱动，当拖放发生时，它用一个数据对象来描述当前的元素，比如 { cardId: 25 }。</p>
<p><strong>Type</strong></p>
<p>类型是唯一标识应用程序中整个项目类别的字符串（或符号），类似于 redux 里面的 actions types 枚举常量。</p>
<p><strong>Monitors</strong></p>
<p>拖放操作都是有状态的，React DnD 通过 Monitor 来存储这些状态并且提供查询。</p>
<p><strong>Connectors</strong></p>
<p>Backend 关注 DOM 事件，组件关注拖放状态，connector 可以连接组件和 Backend ，可以让 Backend 获取到 DOM。</p>
<p><strong>useDrag</strong></p>
<p>用于将当前组件用作拖动源的钩子。</p>
<p><strong>useDrop</strong></p>
<p>使用当前组件作为放置目标的钩子。</p>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDfmVYlCf1oHNA7XNBnw_1660_949.png_720x10000.jpg" alt="img"></p>
<ul>
<li><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a><strong>使用</strong></h4></li>
</ul>
<ol>
<li><strong>使组件能够被拖拽（DragSource）：</strong></li>
</ol>
<p>使用 DragSource 包裹组件，使其可以被拖动。</p>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDfmVYk7n8RYwzQIB_513_48.png_720x10000.jpg" alt="img"> </p>
<p><strong>参数讲解：</strong></p>
<ul>
<li><em>type:</em> 必填。字符串，ES6符号或返回给定组件的函数props。只有为相同类型注册的 drop targets 才会对此拖动源生成的项目做出反应</li>
<li><em>spec：</em>必填。一个普通的JavaScript对象，上面有一些允许的方法。它描述了拖动源如何对拖放事件做出反应。</li>
<li><em>collect：</em>必填。收集功能。它应该返回一个普通的对象注入你的组件。它接收两个参数：connect和monitor。</li>
<li><em>options：</em>可选的。一个普通的对象。</li>
</ul>
<p><strong>spec 对象中的方法</strong></p>
<ul>
<li><em>beginDrag(props, monitor, component)：</em>必填。当拖动开始时，beginDrag 被调用。您必须返回描述被拖动数据的纯 JavaScript 对象。您返回的内容会被放置到 monitor.getItem() 获取到的对象中。</li>
<li><em>endDrag(props, monitor, component)：</em>可选的。当拖动停止时，endDrag 被调用。对于每个 beginDrag，endDrag 都会对应。</li>
<li><em>canDrag(props, monitor)：</em> 可选的。用它来指定当前是否允许拖动。如果您想要始终允许它，只需省略此方法即可。注意：您可能无法调用monitor.canDrag() 此方法。</li>
<li><em>isDragging(props, monitor)：</em> 可选的。默认情况下，仅启动拖动操作的拖动源被视为拖动。注意：您可能无法调用 monitor.isDragging() 此方法。</li>
</ul>
<p><strong>方法中的参数 props, monitor, component</strong></p>
<ul>
<li><em>props：</em>当前组件的 props</li>
<li><em>monitor：</em>一个 DragSourceMonitor 实例。使用它来查询有关当前拖动状态的信息，例如当前拖动的项目及其类型，当前和初始坐标和偏移，以及它是否已被删除。</li>
<li><em>component：</em>指定时，它是组件的实例。使用它来访问底层DOM节点以进行位置或大小测量，或调用 setState 以及其他组件方法。isDragging、 canDrag 方法里获取不到 component 这个参数，因为它们被调用时实例可能不可用</li>
</ul>
<p><strong>collect 中的 connect 和 monitor 参数</strong></p>
<ul>
<li><em>connect:</em> 一个 DragSourceConnector 实例。它有两种方法：dragPreview()和dragSource()。</li>
<li><em>dragSource() =&gt; (elementOrNode, options?)：</em>常用方法，返回一个函数，传递给组件用来将 source DOM 和 React DnD Backend 连接起来</li>
<li><em>dragPreview()：</em>返回一个函数，传递给组件用来将拖动时预览的 DOM 节点 和 React DnD Backend 连接起来</li>
<li><em>monitor：</em>一个 DragSourceMonitor 实例。方法如下：<img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDefR6RcWbvfNBFbNBK4_1198_1110.png_720x10000.jpg" alt="img"></li>
</ul>
<ol start="2">
<li><strong>使组件能够放置拖拽组件（DropTartget）：</strong></li>
</ol>
<p>使用 DropTarget 包裹组件，使其对拖动、悬停或 dropped的兼容项目做出回应。</p>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDf0i4PPuCPsszQG2_438_44.png_720x10000.jpg" alt="img"> </p>
<p><strong>参数讲解：</strong></p>
<ul>
<li><em>type:</em> 必填。字符串，ES6符号或返回给定组件的函数props。此放置目标仅对指定类型的 drag sources 项目做出反应</li>
<li><em>spec：</em>必填。一个普通的JavaScript对象，上面有一些允许的方法。它描述了放置目标如何对拖放事件做出反应。</li>
<li><em>collect：</em>必填。收集功能。它应该返回一个普通的道具对象注入你的组件。它接收两个参数：connect 和 monitor。</li>
<li><em>options：</em>可选的。一个普通的对象。</li>
</ul>
<p><strong>spec 对象中的方法</strong></p>
<ul>
<li><em>drop(props, monitor, component)：</em> 可选的。在目标上放置兼容项目时调用。可以返回 undefined 或普通对象。如果返回一个对象，它将成为放置结果，可以使用 monitor.getDropResult() 获取到。</li>
<li><em>hover(props, monitor, component)：</em> 可选的。当项目悬停在组件上时调用。您可以检查 monitor.isOver({ shallow: true }) 以测试悬停是仅发生在当前目标上还是嵌套上。</li>
<li><em>canDrop(props, monitor)：</em> 可选的。使用它来指定放置目标是否能够接受该项目。如果想要始终允许它，只需省略此方法即可。</li>
<li>文档没有提供按目的处理进入或离开事件的方法。而是 monitor.isOver() 从收集函数返回调用结果，以便我们可以使用 componentDidUpdateReact 钩子函数来处理组件中的进入和离开事件。</li>
</ul>
<p><strong>方法中的参数 props, monitor, component</strong></p>
<ul>
<li><em>props：</em>当前组件的 props</li>
<li><em>monitor：</em>一个 DropTargetMonitor 实例。使用它来查询有关当前拖动状态的信息，例如当前拖动的项目及其类型，当前和初始坐标和偏移，是否超过当前目标，以及是否可以删除它。</li>
<li><em>component：</em>指定时，它是组件的实例。使用它来访问底层DOM节点以进行位置或大小测量，或调用 setState 以及其他组件方法。canDrag 方法里获取不到 component 这个参数，因为它们被调用时实例可能不可用。</li>
</ul>
<p><strong>collect 中的 connect 和 monitor 参数</strong></p>
<ul>
<li><em>connect:</em> 一个 DropTargetConnector 实例。它只有一种 dropTarget() 方法。</li>
<li><em>dropTarget() =&gt; (elementOrNode)：</em>常用方法，返回一个函数，传递给组件用来将 target DOM 和 React DnD Backend 连接起来。通过{ connectDropTarget: connect.dropTarget() }从收集函数返回，可以将任何React元素标记为可放置节点。</li>
<li><em>monitor：</em>一个 DropTargetMonitor 实例。方法如下：</li>
</ul>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDfYH46pMgibNBIfNBKE_1185_1159.png_720x10000.jpg" alt="img"></p>
<ol start="3">
<li><h4 id="DragDropContext-amp-DragDropContextProvider"><a href="#DragDropContext-amp-DragDropContextProvider" class="headerlink" title="DragDropContext &amp; DragDropContextProvider"></a><strong>DragDropContext &amp; DragDropContextProvider</strong></h4></li>
</ol>
<p>使用 DragSource 和 DropTarget 包裹的组件，必须放在： DragDropContext 包裹的根组件内部，或者 DragDropContextProvider 根标签的内部。</p>
<p><strong>DragDropContext</strong> </p>
<p>使用 DragDropContext 包装应用程序的根组件以启用 react-dnd。</p>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDf0i4PQhvxTMpM0Cyg_714_164.png_720x10000.jpg" alt="img"></p>
<p><strong>参数</strong></p>
<ul>
<li><em>backend：</em>必填。一个 React DnD 后端。除非您正在编写自定义的，否则建议使用 React DnD 附带的 HTML5Backend。</li>
<li><em>context：</em>backend 依赖。用于自定义后端的上下文对象。例如，HTML5Backend可以为iframe场景注入自定义窗口对象。</li>
</ul>
<p><strong>DragDropContextProvider</strong></p>
<p>作为 DragDropContext 的替代方法，您可以使用 DragDropContextProvider 元素为应用程序启用React DnD。与 DragDropContext 类似，这可以通过 backendprop 注入后端，但也可以注入一个 window 对象。</p>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDetfZ7wrQHjMpM0C4Q_737_164.png_720x10000.jpg" alt="img"></p>
<p><strong>参数</strong></p>
<ul>
<li><p><em>backend：</em>必填。一个 React DnD 后端。除非您正在编写自定义的，否则建议使用 React DnD 附带的 HTML5Backend。</p>
</li>
<li><p><em>context：</em>backend 依赖。用于自定义后端的上下文对象。例如，HTML5Backend可以为iframe场景注入自定义窗口对象。</p>
</li>
</ul>
<h4 id="实战小demo"><a href="#实战小demo" class="headerlink" title="实战小demo"></a><strong>实战小demo</strong></h4><ol>
<li><strong>创建新项目：npx create-react-app dnd-demo</strong></li>
<li><strong>配置项目：</strong><ol>
<li><strong>npm run eject</strong></li>
<li><strong>在 babel 中添加 plugins 配置</strong></li>
</ol>
</li>
</ol>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDetfZ70k03XNAaHNAqQ_676_417.png_720x10000.jpg" alt="img"></p>
<ol>
<li><strong>在最外层容器 App.js 中添加：</strong></li>
</ol>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDefR6Rlh_nHNAtLNBC8_1071_722.png_720x10000.jpg" alt="img"></p>
<ol start="2">
<li><strong>创建中间组件：</strong></li>
</ol>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDfJ6ZQfbjwnNBG_NBCQ_1060_1135.png_720x10000.jpg" alt="img"></p>
<ol start="3">
<li><strong>创建核心组件：</strong></li>
</ol>
<p><img src="/2022/10/14/React-Dnd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDefR6RmIlETNBLTNBBU_1045_1204.png_720x10000.jpg" alt="img"></p>
<h4 id="学习心得与感悟"><a href="#学习心得与感悟" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今日实现基础react-dnd的实现，React DnD 使用数据而不是视图作为事实的来源。在屏幕上拖动某些内容时，不会说正在拖动组件或DOM节点，而是说正在拖动某种类型的组件。一共有三个组件具有相关使用，分别是最外层容器、中间件Container（数据源和数组交换）、和核心组件Card（使用react-dnd的api）。除此之外，还有react-dnd的相关扩展用法：</p>
<ul>
<li><strong>让组件既可以被拖动也可以接收拖动元素</strong></li>
</ul>
<p>（1）使用useRef引入ref：ref = useRef(null)</p>
<p>（2）使用drag和drop包装ref：drag(drop(ref))</p>
<p>（3）将ref变量传给组件</p>
<ul>
<li><strong>drag组件传递数据</strong></li>
</ul>
<p>（法1）直接使用item的属性传：item:{type:’Card‘,id:1}</p>
<p>（法2）使用begin方法传值，begin方法的返回值会覆盖item属性，一定要传type属性</p>
<p>drop组件可以在hover或drop方法中的第一个参数获取到，或使用DropTartgetMonitor的getItem()函数获取</p>
<ul>
<li><strong>获取drag组件或drop组件的状态信息，如isOver，isDragging</strong></li>
</ul>
<p>drag：collect函数返回的对象会成为useDrag的第一个参数collectProps，可以在组件中直接使用</p>
<p>drop：collect函数返回的对象会成为useDrop的第一个参数collectProps，可以在组件中直接使用</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-pageBuilder项目源码阅读笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/" class="article-date">
      <time datetime="2022-10-14T02:15:29.012Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/">pageBuilder项目源码阅读</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="pageBuilder项目源码阅读①"><a href="#pageBuilder项目源码阅读①" class="headerlink" title="pageBuilder项目源码阅读①"></a>pageBuilder项目源码阅读①</h3><h4 id="学习困难"><a href="#学习困难" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>检验eslint</strong></li>
</ul>
<p>师傅今天给我他正在做的一个pageBuilder项目，让我阅读学习。师傅怕我这边eslint报错，更新完develop在gitlab拉取代码检查eslint，码一下流程：</p>
<ul>
<li><strong>创建分支</strong></li>
</ul>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDefR6GjEAtjNBU7NCDo_2106_1358.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>git checkout develop：</strong>切换到远程主分支</li>
<li><strong>git pull：</strong>拉取远程仓库主分支的代码</li>
<li><strong>git checkout yh：</strong>切换到远程自己的分支</li>
<li><strong>git merge develop：</strong>合并远程主分支和自己分支代码</li>
<li><strong>git push：</strong>将代码上传到远程仓库自己的分支上</li>
</ul>
<p>发现了一些代码轻微飘红，但不影响项目运行：</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfJ6ZFfRVTjNAoDNBSc_1319_640.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>项目难点</strong></li>
</ul>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfJ6ZFsFT5TNBXDNCZc_2455_1392.png_720x10000.jpg" alt="img"></p>
<p>如图是此次项目pageBuilder的编辑界面，我们可以拖拽左边的小组件放到中间的展示容器中，通过修改右侧的组件属性值将其打造成自己喜欢的风格。</p>
<ul>
<li><strong>实时渲染</strong></li>
</ul>
<p>在右侧修改属性值的时候，数据会进行实时更新，展示容器根据更新后的数据进行实时渲染。</p>
<ul>
<li><strong>数据传递</strong></li>
</ul>
<p>在用户选择保存或者发布时，将其更新改造后的展示容器内的组件属性存储到redux中，以JSON数据的形式传递给APP进行接收然后展示在客户端。</p>
<ul>
<li><strong>组件拖拽</strong></li>
</ul>
<p>左侧的拖拽用法采用react-dnd实现，舍弃了Drag and Drop。</p>
<ul>
<li><strong>阅读顺序</strong></li>
</ul>
<p>因为这个项目，现在文件目录是有点混乱的，多少有点找不到想看的文件在哪，所以问了师傅该怎么阅读。平常上手项目：目录结构-&gt;依赖安装-&gt;路由跳转-&gt;项目运行。师傅建议我这个项目首先看路由，然后把主界面也就是pagelist看一下，之后就是看编辑界面，编辑界面又分为左中右三个部分，左边每一个小图标都是一个独立组件，中间容器负责展示效果，右边的每个子项也都是独立组件，可重用性很高。重头文件就是右边部分以及数据源，也就是每个组件都存储的属性值，很长的一个文件，暂时还没看完。</p>
<h4 id="学习心得与感悟"><a href="#学习心得与感悟" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天和师傅沟通了很久，了解了这个项目的受众群体、系统操作、项目难点等等，师傅说这个项目和普通react项目还是有点区别的，毕竟类似于构建一个低代码平台，要求实现用户更改组件属性时，代码内的数据也要相应修改，而且在修改属性之后，要在页面上实时地渲染出来，在vue中实现可以使用监听数据变化，只要数据改变就重新渲染。但在react中没有那么简单，react非常依赖于redux，如果没有redux，也许react就像一只没有翅膀的小鸟，失去了灵魂。不仅要求实时更新与渲染，还需要将用户修改过后的数据存到redux，通过redux存储json数据，最后传递给APP，但是在用户点击返回时，数据恢复成原样，只有在用户保存或者发布的时候，才将数据存储到redux中共享。所以现在纠结的是在用户正在修改属性值的时候，数据要如何保证能够在用户边修改边传递给容器用于展示效果，而不会影响到redux中数据变化。我从今天开始就负责阅读这个项目文件写写注释、充当测试–发现bug的时候给师傅提出来、后期对项目比较了解之后开发一些小组件等。</p>
<h4 id><a href="#" class="headerlink" title></a></h4><h3 id="pageBuilder项目源码阅读②"><a href="#pageBuilder项目源码阅读②" class="headerlink" title="pageBuilder项目源码阅读②"></a><strong>pageBuilder项目源码阅读②</strong></h3><h4 id="学习困难-1"><a href="#学习困难-1" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>pageList</strong></li>
</ul>
<p>主界面中内容列表的文件，使用antd的组件重写样式，包含分页、点击展开、编辑、发布、预览等功能</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeREacw-gdDNBYnNDoo_3722_1417.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>async&amp;&amp;await</strong></li>
</ul>
<p>看到这里。有关async和await的知识点有点记不清了，于是去学习了下。<img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeC26yodXlvNAZvNA6U_933_411.png_720x10000.jpg" alt="img"></p>
<p>总结起来就是，<strong>async用于声明一个函数为异步处理函数</strong>，除此声明外，函数的写法和同步函数没什么区别，它返回的是一个Promise对象，而Promise是用来干嘛的，他是用于解决异步问题（比如回调地狱）的异步操作的对象，它本身不是异步的，你使用它的时候他会立即执行，但是他会等到你需要的结果才会返回结果；而<strong>await意味着等待一个异步函数的执行结果</strong>，它必须写在async内部，也就是暂停当前async的语句执行，让async先等一下，等到await后面的异步函数执行完后，再继续执行语句。</p>
<p>比如上面截图的执行顺序为先进入async函数执行对象赋值，然后遇到await，等待doFetchDataPrivList(data)执行完成返回结果后，async剩下的语句才会执行。这种等待方式又让我想起来<strong>宏任务和微任务的执行顺序</strong>，比如setTimeout是宏任务，而promise的链式调用内容是微任务（promise本身是立即执行的！），在同步代码中，如果遇到promise的.then方法，将其压入微任务栈，遇到setTimeout压入宏任务栈，在同步代码执行完之后，主栈中没有可执行代码时，先执行微任务栈的可执行代码，然后才执行宏任务栈的可执行代码，如果在执行微任务栈的代码时又有立即执行函数或者同步代码，依旧先执行同步代码，再执行微任务，最后执行宏任务。</p>
<ul>
<li><strong>useAsyncFn</strong></li>
</ul>
<p>这个项目的接口请求全部采用这种方式创建，在请求操作方法外层套了一层来自react-use的useAsyncFn钩子用于异步函数的状态管理，相当于react使用redux进行状态管理。useAsync返回的是请求结果及状态，而它返回的是请求函数并非请求结果，需要手动调用的时候再请求。比如下图例子，返回的就是名为doGroupList的请求函数。<img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDefR6HQxd8XNAo3NBhA_1552_653.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>运算符知识: ?. &amp;&amp; ?: &amp;&amp; ?? &amp;&amp; ``</strong></li>
</ul>
<p>在看到pagelist分页函数的时候，发现了一个不知道的es6小知识点</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDefR6HWViYnNApfNBJI_1170_663.png_720x10000.jpg" alt="img"></p>
<p>?. 意思是可选链，类似 &amp;&amp; ，使用场景：在开发中对接口返回的嵌套对象数据进行属性判断，比如 res ?. data ?. pageList 可以写成 res &amp;&amp; res.data &amp;&amp; res.data.pageList 或者 res ? (res.data ? res.data.pageList : undefined) : undefined，挨个判断属性是否存在。</p>
<p>?: 意思是可选参数，比如data { id: string | number , key ?: string} 表示key为可选属性，相当于参数自动加上 undefined。</p>
<p>?? 意思是取默认值，类似 || ，使用方法：const res = actualValue ?? defaultValue 也就类似于 actualValue ? actualValue : defaultValue。</p>
<p>`` 比较方便，可以在反引号内部直接写代码，可操作性高了。</p>
<h4 id="学习心得与感悟-1"><a href="#学习心得与感悟-1" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天看的pagelist文件夹业务逻辑还是比较好理解的，没有涉及到很多像redux一样有好几个不同管理的文件，主要操作就是获取数据、分页、检查权限、接口请求等。整个主界面列表使用的是antd的pageForm、Table等，还有一些自定义组件的使用，明天开始操作界面的代码阅读！</p>
<h3 id="pageBuilder项目源码阅读③"><a href="#pageBuilder项目源码阅读③" class="headerlink" title="pageBuilder项目源码阅读③"></a><strong>pageBuilder项目源码阅读③</strong></h3><h4 id="学习困难-2"><a href="#学习困难-2" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>components/editor/schema/edit/customerComponents.tsx</strong></li>
</ul>
<p>该文件主要用于存储属性数据，用户可以进行相应修改。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeC26zcrLt7NBdTNB-Y_2022_1492.png_720x10000.jpg" alt="img"></p>
<p>比如我在页面上添加了一个Grapic Article组件，我可以对这个组件进行位置调整、添加图片、添加备注信息等修改，这些修改在用户点击保存或发布时将会被存储到customerComponents中，以便后续传递给APP接收。比如下图就展示了GraphicPost组件的属性，其中header、basicInfo等属于属性的归属，比如title属性就归属于basicInfo，其中 title 也是以公用组件的形式创建的，以key的形式传递给schema，增加代码复用性，提高开发效率。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfmVYbjWULrNAz_NAx4_798_831.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>components/editor/schema/fileds/index.tsx</strong></li>
</ul>
<p>存储的主要是菜单以及对应左侧内容的数据。比如下图，点击PTO之后左侧可拖拽组件内容会发生改变。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfmVYbktp-nNBi3NC5U_2965_1581.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDe7s5cr1PMbNA67NBAw_1036_942.png_720x10000.jpg" alt="img"></p>
<p>其中DragPanel中的data数据就是组件的所有属性数据，用于发送给APP。</p>
<ul>
<li><strong>components/editor/Left/index.tsx</strong></li>
</ul>
<p>左侧容器文件：根据菜单图标激活状态判断，显示展示内容：</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDf0i4F5wa6LNBS3NBb0_1469_1325.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeC26zhUwHjNAXHNBXc_1399_369.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>components/editor/Left/DragItem.tsx</strong><ul>
<li><strong>类型标记</strong></li>
</ul>
</li>
</ul>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDgCwXwPNeo06zQYg_1568_58.png_720x10000.jpg" alt="img"></p>
<p>看到函数参数之间的冒号，有点疑惑，搜索发现是ts语法，表示类型标记，比如：<strong>（args : number）</strong>就代表args被标记为number类型。</p>
<ul>
<li><strong>any &amp; never &amp; void</strong></li>
</ul>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeREad1NEntSzQG4_440_82.png_720x10000.jpg" alt="img"> </p>
<p>没有见过的语法，上网搜了一下发现是ts中的类型，除此之外<strong>还有never、void都是TS类型。</strong></p>
<p><strong>any：</strong>在一些情况下，如果我们无法确定变量的类型时（或者无需确认类型时），我们可以将其指定为 any 类型。，对于标记为 any 类型的变量，不需要进行类型检查，直接通过编译阶段。<strong>特点：</strong>1. 允许赋值为任意类型； 2. 允许访问任意属性和方法； 3. 在声明变量的时候，如果没有指定变量类型，会被识别为 any 类型。</p>
<p><strong>never：</strong>表示永远不会有值的一种类型，比如 never 类型是那些总是会抛出异常或根本就不会有返回值的函数表达式或箭头函数表达式的返回值类型。适用于：比如在swtich场景中，我们通常会在结尾添加一个default，但实际上流程进入default就意味着场景已经出错了，所以我们可以在 default 中写 <strong>const check : never = type;</strong> 及时发现问题。</p>
<p><strong>void：</strong>表示没有任何类型，申明为 void 类型的变量，只能赋予 undefined 和 null。</p>
<ul>
<li><strong>useDrag(☆)</strong></li>
</ul>
<p>useDrag提供了一种方式，以让组件成为DnD系统中的拖拽源。通过传递特定的参数，提供需要传递给放置组件的数据（即item），组件渲染所需的props（即collect），以及等等。</p>
<p><strong>返回值：</strong></p>
<p><strong>isDragging：</strong>collecting function的返回值。如果没有collecting function会返回空对象，判断是否在拖拽中，替代原本判断拖拽中的方法。</p>
<p><strong>dragRef：</strong>拖拽对象的connector函数。</p>
<p><strong>connectDragPreview：</strong>拖拽预览的connector函数。</p>
<p><strong>collect:</strong> 会返回一个对象的函数(collecting function)，拥有monitor参数，返回的对象会注入到当前组件中。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfJ6ZHDpCNbNAbjNBSY_1318_440.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfYH4xZQth3NAVjNAu0_749_344.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeREad5_TInMjs0HJg_1830_142.png_720x10000.jpg" alt="img"></p>
<p>通过 isDragging 判断是否在拖拽中，dragRef 绑定拖拽的 item， connectDragPreview 应该是拖拽时的跟随图像：</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDetfZygm-hzNAh3NArQ_692_541.png_720x10000.jpg" alt="img"></p>
<h4 id="学习心得与感悟-2"><a href="#学习心得与感悟-2" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天主要阅读了组件的属性数据、左侧容器的拖拽组件的实现以及一些小的ts知识点。拖拽由子组件使用useDrag实现，猜测父组件（也就是中间容器）应该会是useDrop，useDrag返回三个值，接收之后用包含子组件的div接收绑定，拖拽的组件还有数量限制，需要判断数量、拖拽的状态。目前为止看的代码都能理解，但是需要自己编写的时候应该也没那么容易，可能要费一番功夫思考逻辑以及搭建过程。</p>
<h3 id="pageBuilder项目源码阅读④"><a href="#pageBuilder项目源码阅读④" class="headerlink" title="pageBuilder项目源码阅读④"></a><strong>pageBuilder项目源码阅读④</strong></h3><h4 id="学习困难-3"><a href="#学习困难-3" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>components/editor/canvas/index.tsx</strong></li>
</ul>
<p>这个文件主要构建的是组件预览区域：</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDefR6I3V4MzNBpjNC6A_2976_1688.png_720x10000.jpg" alt="img"></p>
<p>经常在文件中看到 interface xxx，本来以为可能和 java 开发中的 interface 一样，但看它的实现形式和java还是有很大区别的。java 中的 interface 一般里面都是函数体的定义，用于实现类的多继承；但是 ts 中的 interface 用于对值所具有的结构进行类型检查。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDefR6I4cfizNAQnNA1w_860_265.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDgCwXw-Ew5HM7s0EoQ_1185_238.png_720x10000.jpg" alt="img"></p>
<p>昨天的代码阅读中，看到左侧的小组件每个都绑定了可拖拽属性，使用到useDrag，它们的统一目标就是拖动到中间容器中，所以中间容器需要绑定useDrop。useDrop提供了方式，以让你的组件作为放置对象存在于dnd系统中。通过传递指定参数，以指定接受(accept)的拖拽对象，收集(collect)的属性，等等。第一个返回值为collecting function的返回值，第二个返回值为放置对象的connector函数。其中canDrop、isOver在connect（monitor）进行监听是否可以放置、是否重叠等，同时该容器设置了添加拖拽组件和移除拖拽组件功能。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeC260SsbbHNAprNB18_1887_666.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDf0i4Gs5gErNA3zNA08_847_892.png_720x10000.jpg" alt="img"></p>
<p>当拖拽组件和放置容器重合了&amp;&amp;此处可以放置，如果是已经在容器中的组件，拖拽到可放置的位置会出现插入的线条，用于已经放进来的组件调整位置；如果是第一次进容器的组件，拖拽到可放置的位置会出现一个提示盒子：drag and drop here，提示用户可以放置于此。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDgCwXxCiTIjNAYPNBPA_1264_387.png_720x10000.jpg" alt="img"></p>
<p>为了在整个编辑页面都能使用拖拽功能，在editor/index.tsx文件中添加了DndProvider进行页面包裹，类似于Redux中的Provider。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfJ6ZH0hUsXNAnXNBkY_1606_629.png_720x10000.jpg" alt="img"></p>
<p>判断用户有没有修改容器的背景属性，比如颜色、尺寸等，如果修改了就使用修改值，没有修改就使用默认值。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeREaeqKw9fNAa7NBoc_1671_430.png_720x10000.jpg" alt="img"></p>
<p>看到一个没见过的用法，所有元素的className都写成styles.xxx的样式，问了一下师傅，这是css modules：按需加载，不会造成样式污染，是优化加载的一种方法，局部作用css样式的原理是因为在使用styles.xx之后会自动生成一个独一无二的名字，不会与其他选择器重名。比如在某组件的less文件中设置 .title的样式，在使用 styles.title 之后，在检查元素时发现变成了 ._src_Header_Module_title，完美避免了父组件引用这个组件时，父组件的styles里面也有同名.title从而覆盖子组件样式。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDefR6I-8KRnMls0B7g_494_150.png_720x10000.jpg" alt="img"> </p>
<ul>
<li><strong>components/editor/canvas/canvasItem.tsx</strong></li>
</ul>
<p>这个文件描述组件拖拽到在中间容器之后的，展示在中间容器上的组件。主要描述了移除、调整、修改该组件的功能，将其与右侧属性相绑定，右侧实时更改，这边就会更新渲染，连接到store保存属性更改。由于canvasItem既需要被拖拽又需要放置，所以在这个文件中useDrag &amp;&amp; useDrop都有使用，除此之外还使用了useRef、useAppSelector、useAppDispatch等。用法基本都一样。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDf0i4G0TsUhMzQOp_937_76.png_720x10000.jpg" alt="img"></p>
<h4 id="学习心得与感悟-3"><a href="#学习心得与感悟-3" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天阅读了中间容器的文件，基本熟悉了到 react-dnd 的用法，还学习到了 css modules 优化加载，ts 类型检查等。react-dnd 主要 api 就三个，一个设置拖拽源为可拖拽，一个设置放置源为可放置，一个设置区域为允许拖拽放置，可能我的理解有些偏差，我还不太理解 useDrop 到底是作用于拖拽组件上还是放置容器上，我本来的理解是在容器上，但是我又看到 CanvasItem 也使用了 useDrop，我也没找到怎么能把两个组件重叠在一起，所以我对 useDrop 作用的理解就有点开始混乱了。也可能是这个地方有些功能我还没了解到，明天再深入摸清楚这个系统的细节功能。</p>
<h4 id="-1"><a href="#-1" class="headerlink" title></a></h4><h3 id="pageBuilder项目源码阅读⑤"><a href="#pageBuilder项目源码阅读⑤" class="headerlink" title="pageBuilder项目源码阅读⑤"></a><strong>pageBuilder项目源码阅读⑤</strong></h3><h4 id="学习困难-4"><a href="#学习困难-4" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>components/editor/Right/index.tsx</strong></li>
</ul>
<p>该文件主要描述编辑界面的右侧属性操作容器，涉及非常多的数据交互与传递。 </p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfmVYddOzd7NBWrNCZs_2459_1386.png_720x10000.jpg" alt="img"></p>
<p>开局遇到一个深度遍历的递归函数 traverse(data,fn) ,用于遍历监听所有子值变化。猜测应该用于用户修改属性时，如果发现属性值被修改，就要立即响应，应该类似 diff 算法吧？深度第一遍，从根到叶，子节点按相反的顺序，如果fn返回错误，则终止遍历。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDgCwXyFh1TDNATTNA90_989_308.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDf0i4HytsovNAcXNBjg_1592_453.png_720x10000.jpg" alt="img"></p>
<p>这段函数用来渲染字段，比如说 Graphic Post 组件中属性可能具有 添加标题、插入图片、调整位置等，每一个修改的功能都写成一个小组件，将这些属性小组件存放在界面组件中，传入renderField函数中，renderField函数根据传入的类型遍历渲染，完成右侧属性修改容器的内容填充。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfJ6ZI5TZ3zNBPjNBJ0_1181_1272.png_720x10000.jpg" alt="img"></p>
<p>已经搭建好的草稿是可以复制的，复制过来的page一般都要重新设置起始时间以及失效时间。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeREafs-EoDM5c0DeA_888_229.png_720x10000.jpg" alt="img"></p>
<p>初始化字段的时候将内容都清空重置，等待用户输入。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDgCwXyGfszPNAxzNA5U_917_796.png_720x10000.jpg" alt="img"></p>
<p>用来归纳相似属性的折叠面板渲染，比如说title、Edit ‘More’等等属性都归属于 Basic Information，而Basic Information 可以折叠与展开，这个函数就是来绑定折叠面板的header 和 content。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDe7s5enZOcXNA0XNBiU_1573_837.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeREafuipfPMys0Gpg_1702_202.png_720x10000.jpg" alt="img"></p>
<h4 id="学习心得与感悟-4"><a href="#学习心得与感悟-4" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天主要阅读了右侧属性面板的index文件，学习到了数据与组件属性相绑定、不同的组件如何遍历渲染构建，判断逻辑找到清空时机等。接下来的阅读目标是：</p>
<ol>
<li>把右侧的界面组件观看，学会两者之间的连接；</li>
<li>知道添加一个新拖拽组件需要的所有流程；</li>
<li>尝试添加新组件在本地查看。</li>
</ol>
<hr>
<h3 id="pageBuilder项目源码阅读⑥"><a href="#pageBuilder项目源码阅读⑥" class="headerlink" title="pageBuilder项目源码阅读⑥"></a><strong>pageBuilder项目源码阅读⑥</strong></h3><h4 id="学习困难-5"><a href="#学习困难-5" class="headerlink" title="学习困难:"></a>学习困难:</h4><p><strong>如何实现新组件的添加</strong></p>
<ol>
<li><strong>添加组件属性</strong></li>
</ol>
<p>根据菜单分类，如果新建组件在CLP内，则将属性添加在customComponents里</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeC266nkpEbNAXLNAUY_326_370.png_720x10000.jpg" alt="img"> </p>
<p>新建一个组件，需要在editFields中添加组件名及内部属性。比如Toolbar组件，header属于一个属性类别，里面包含自定义属性类，sideMenu属于BasicInfo管辖范围内，使用的是Switch类，根据按钮决定是否展示。不过这个地方已经更新了，尝试注释，结果发现对界面无影响，问师傅说已经重写在render里了，比如BasicInfo重写在renderBasicInfo里，而renderBasicInfo包含renderToolbar，相当于提取出来了。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfJ6ZOIXo4bNAvTNBKI_1186_756.png_720x10000.jpg" alt="img"></p>
<ol start="2">
<li><strong>封装组件属性类别</strong></li>
</ol>
<p>目的是提高属性重用性，在将每一个属性种类进行整体封装。先去获取当前版本的数据大json，然后根据type进行分类渲染组件，下面就是根据具体字段渲染具体属性值。比如下面就是轮播图组件的basicInfo封装。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDf0i4NOx5V7NAevNAVQ_340_491.png_720x10000.jpg" alt="img"> </p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDetfZ5wDOQnNA8bNA7Q_948_966.png_720x10000.jpg" alt="img"></p>
<ol start="3">
<li><strong>定义左侧组件名、图标、数量等</strong></li>
</ol>
<p>左侧面板渲染组件时，遍历menus数据，menus中包含DragPanel，存放拖拽组件的容器，涵盖了拖拽组件所需的所有属性数据，传递给DragItem。也就相当于将组件名称、图标、数量全部传递给左侧面板。<img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDefR6PdDunzNAqbNB5g_1944_678.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDgCwX3ixO2jNA-fNBTQ_1332_999.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDeC2663gUmnNBKXNB4Y_1926_1189.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDetfZ5xX937NAWrNBEM_1091_362.png_720x10000.jpg" alt="img"></p>
<ol start="4">
<li><strong>创建中间画布</strong></li>
</ol>
<p>中间面板，用于预览修改效果，通过canvas实时获取的组件属性实时渲染效果，这个相当于平常写独立组件，‘画’界面。<img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDgCwX3jVYdXNBPjNCDQ_2100_1272.png_720x10000.jpg" alt="img"></p>
<h4 id="学习心得与感悟-5"><a href="#学习心得与感悟-5" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>非常默契！今天本来也打算看添加新组件所需的步骤，刚好师傅也来让我阅读。不过这个阅读起来还是没有那么简单，还是咨询了师傅关于添加新组件的流程。如上所示，然后师傅说等一阵子可能有个新需求，一个简单的组件可以让我练练手，目前的话就是我明天开始自己写写小demo，仿写一下之前的组件之类的进行项目实战！</p>
<h3 id="pageBuilder项目源码阅读⑦"><a href="#pageBuilder项目源码阅读⑦" class="headerlink" title="pageBuilder项目源码阅读⑦"></a><strong>pageBuilder项目源码阅读⑦</strong></h3><h4 id="学习困难-6"><a href="#学习困难-6" class="headerlink" title="学习困难:"></a>学习困难:</h4><p><strong>实现添加demo组件（参考Toolbar）</strong></p>
<ol>
<li><strong>添加属性</strong></li>
</ol>
<p>首先在schema/edit 的customComponents文件中插入新组件 Ydemo 所需的属性：</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfmVYjsL-mfNBNvNBD4_1086_1243.png_720x10000.jpg" alt="img"></p>
<ol start="2">
<li><strong>属性布局</strong></li>
</ol>
<p>由于目前暂定是给每个组件改写basicInfo内容，所以要在right/renderBasicInfo中新建一个名为 renderYdemo 的文件，内容为想要的basicInfo内容。如果只是添加了属性是不够的，仅仅是提供了数据，不能在页面上展示。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDe7s5kzGFqLNBV_NCWM_2403_1375.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfmVYjtReA_NBG7NB3M_1907_1134.png_720x10000.jpg" alt="img"></p>
<ol start="3">
<li><strong>定义组件</strong></li>
</ol>
<p>要将组件数据传递给左侧面板，需要在schema/fields中的 customComponents 文件里添加 Ydemo 的组件名、数量、图标等，还有 Ydemo 中属性的详细数据，比如说我有 messageBox 属性,那么我就还需要 messageBoxId 写在里面，这里的数据会传递给左侧面板以及 renderYdemo 中，比如 basicInfo 中遍历获取属性名就需要用到这里的数据。这里的数据形式为json格式，便于获取和展示数据。</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfYH45bJK-rNBUnNB-c_2023_1353.png_720x10000.jpg" alt="img"></p>
<ol start="4">
<li><strong>展示组件</strong></li>
</ol>
<p>用于中间面板展示组件的，写法类似于之前写独立组件的方法。在 schema/preview中的 customComponents 文件中加入 Ydemo 的方法并导出，在这里面写 Ydemo 的样式：</p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDe7s5k10_YTNA9bNCOQ_2276_982.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfJ6ZPI8Z5DNA0_NCRA_2320_847.png_720x10000.jpg" alt="img"></p>
<ol start="5">
<li><strong>成果展示</strong></li>
</ol>
<p><img src="/2022/10/14/pageBuilder%E9%A1%B9%E7%9B%AE%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/lALPDfYH45dYiNjNBknNB8k_1993_1609.png_720x10000.jpg" alt="img"></p>
<h4 id="学习心得与感悟-6"><a href="#学习心得与感悟-6" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天的任务完成的不是特别困难，但是有一个小问题，关于edit添加属性，如果在edit中没有添加belongTo：‘basicinfo’，在右侧面板中 basicInfo 是空白的，不会展示出来，但只要添了一个属性属于 basicInfo，不管添加的是什么属性，都能够成功展示重写后的 basicinfo 。暂时没弄明白是什么原理，应该所有属性重写都这样，目前是需要添加一个属性给它声明出来，才会展示。</p>
<h3 id="pageBuilder项目源码阅读⑧"><a href="#pageBuilder项目源码阅读⑧" class="headerlink" title="pageBuilder项目源码阅读⑧"></a><strong>pageBuilder项目源码阅读⑧</strong></h3><h4 id="学习困难-7"><a href="#学习困难-7" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>可视化楼层文件阅读</strong></li>
</ul>
<p><img src="https://static.dingtalk.com/media/lALPDfJ6ZUFggHTNBU3NB_4_2046_1357.png_720x10000.jpg?bizType=report" alt="img"></p>
<ul>
<li><strong>components / editor / Floor</strong><ul>
<li><strong>index.tsx</strong></li>
</ul>
</li>
</ul>
<p><img src="https://static.dingtalk.com/media/lALPDf0i4TAb9nLMwc0DVQ_853_193.png_720x10000.jpg?bizType=report" alt="img"></p>
<p>通过 expanded 状态判断用户是否点击：取消展开，如果点击就只显示展开按钮，否则显示整个楼层。默认为 TRUE。</p>
<p><img src="https://static.dingtalk.com/media/lALPDgCwX9TwRm3NAmbNBZs_1435_614.png_720x10000.jpg?bizType=report" alt="img"></p>
<ul>
<li><strong>components / editor / TreePanel</strong></li>
</ul>
<p>这个文件夹的文件主要是针对拖拽过来的组件，可以将其缩略图标及组件名称以楼层形式展现在画布右侧。</p>
<ul>
<li><strong>index.tsx</strong></li>
</ul>
<p>首先将中间画布绑定state数据，其中codeTree是一个 reducer，包含一些选中的标签、id等属性。<img src="https://static.dingtalk.com/media/lALPDefR6VEJz85NzQOa_922_77.png_720x10000.jpg?bizType=report" alt="img"></p>
<p>绑定 useDrop，使画布具有放置作用，楼层内展示的组件可以拖拽调整组件在画布中的位置。</p>
<p><img src="https://static.dingtalk.com/media/lALPDf0i4S6z_Y3NAzDNBVY_1366_816.png_720x10000.jpg?bizType=report" alt="img"></p>
<p>通过 children 属性，也就是传入的 TreeItem 个数进行遍历展示到界面。</p>
<p><img src="https://static.dingtalk.com/media/lALPDetfZ_ikneTNAWbNBH8_1151_358.png_720x10000.jpg?bizType=report" alt="img"></p>
<ul>
<li><strong>TreeItem.tsx</strong></li>
</ul>
<p>楼层中如果有 Toolbar ，那么它只能在第一层，所以在这个地方写了有关dataType的判断，不是 Toolbar 的组件才可以进行移动调整楼层。</p>
<p><img src="https://static.dingtalk.com/media/lALPDe7s5p2E8_rNAvDNBMs_1227_752.png_720x10000.jpg?bizType=report" alt="img"></p>
<p>设置拖拽源，绑定parentId，即组件id：</p>
<p><img src="https://static.dingtalk.com/media/lALPDe7s5p19oeTNAhDNA-M_995_528.png_720x10000.jpg?bizType=report" alt="img"></p>
<p>设置拖拽样式，当拖拽的时候占位透明度变为50%，提示用户目前拖拽的元素原始位置：</p>
<p><img src="https://static.dingtalk.com/media/lALPDeREarVAhGwyzQJs_620_50.png_720x10000.jpg?bizType=report" alt="img"> </p>
<p>判断当前位置是否能够放置组件，保证当前位置不属于 isParentNode 的返回标签，就在此生成一条蓝色的线条，代表插入位置线：</p>
<p><img src="https://static.dingtalk.com/media/lALPDf0i4TaEKGBxzQPY_984_113.png_720x10000.jpg?bizType=report" alt="img"></p>
<p><img src="https://static.dingtalk.com/media/lALPDfYH4-0qN83NAZjNBeI_1506_408.png_720x10000.jpg?bizType=report" alt="img"></p>
<h4 id="学习心得与感悟-7"><a href="#学习心得与感悟-7" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今日阅读的组件有点像 左边面板+中间画布 的组合，因为他既要拖拽也要放置，还需要调整位置，但是整体来说难度并不是很大，pageBuilder了解了拖拽与数据交互之后，所有的文件都大同小异，没有什么特别难的地方，最主要的就是整体的贯通逻辑线，在开发时要做到连成一条线，要有头脑、有设计、有思路的开发。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Async &amp;&amp; Await简述" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/Async%20&&%20Await%E7%AE%80%E8%BF%B0/" class="article-date">
      <time datetime="2022-10-14T02:13:40.834Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/Async%20&&%20Await%E7%AE%80%E8%BF%B0/">Async &amp;&amp; Await</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="Async-amp-amp-Await"><a href="#Async-amp-amp-Await" class="headerlink" title="Async &amp;&amp; Await"></a>Async &amp;&amp; Await</h4><p>看到这里。有关async和await的知识点有点记不清了，于是去学习了下。![img](Async &amp;&amp; Await简述/lALPDeC26yodXlvNAZvNA6U_933_411.png_720x10000.jpg)</p>
<p><strong>async用于声明一个函数为异步处理函数</strong></p>
<p>除此声明外，函数的写法和同步函数没什么区别，它返回的是一个Promise对象，而Promise是用来干嘛的，他是用于解决异步问题（比如回调地狱）的异步操作的对象，它本身不是异步的，你使用它的时候他会立即执行，但是他会等到你需要的结果才会返回结果；</p>
<p><strong>await意味着等待一个异步函数的执行结果</strong></p>
<p>它必须写在async内部，也就是暂停当前async的语句执行，让async先等一下，等到await后面的异步函数执行完后，再继续执行语句。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-redux &amp;&amp; react-redux学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/redux%20&&%20react-redux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
      <time datetime="2022-10-14T02:05:17.760Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/redux%20&&%20react-redux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">redux &amp;&amp; react-redux学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="redux学习"><a href="#redux学习" class="headerlink" title="redux学习"></a>redux学习</h4><p>在应用中所有的 state 都以对象树的形式储存在单一的 store 中。惟一改变 state 的办法是触发 action，一个描述发生什么的对象。 为了描述 action 如何改变 state 树，需要用到 reducers。</p>
<ul>
<li><strong>store</strong></li>
</ul>
<p>在我们使用脚手架搭建项目的时候默认是没有store的，它是由我们手动在项目的src目录下创建的一个保存数据的store文件夹。redux之前是使用 createStore，目前是使用 configureStore这个官方API用来生成store。</p>
<p><strong>store 的三大原则：</strong></p>
<ul>
<li><p><em>单一数据源：</em>整个应用的 state 被储存在一棵 object 树中，并且这个 object 树只存在于唯一一个 store 中；</p>
</li>
<li><p><em>State 是只读的：</em>唯一改变 state 的方法就是触发 action，action 是一个用于描述已发生事件的普通对象；</p>
</li>
<li><p><em>使用纯函数来执行修改：</em>为了描述 action 如何改变 state 树 ，需要定义 reducers。</p>
</li>
<li><p><strong>reducer</strong></p>
</li>
</ul>
<p>简单来说 reducer 是一个纯函数，什么是纯函数？就是相同的输入必定有相同的输出，就叫做纯函数。<strong>reducer 作用就是用来改变 store 中的数据。</strong>定义reducer需要两个参数，分别是当前需要被共享的 state 以及用于改变 state 的 action。</p>
<ul>
<li><strong>action</strong></li>
</ul>
<p>action我们可以理解为是一种改变数据的触发行为，<strong>作用就是通知reducer改变哪一条数据；</strong></p>
<h4 id="react-redux学习"><a href="#react-redux学习" class="headerlink" title="react-redux学习"></a><strong>react-redux学习</strong></h4><p>本来看的是原生redux，但是 redux 在 react 不好使用。React-Redux 是 Redux 的官方React绑定库。它能够使 React 组件从 Redux store 中读取数据，并且向 store 分发 actions 以更新数据。用原生redux和react结合使用的时候，每次都要载入 store，而且派发完 action 修改数据后还要调用 subscribe 去监听，在监听里更新事件，React-Redux 规避了这些麻烦。</p>
<p><strong>React-Redux的三个关键作用</strong></p>
<ul>
<li>通过 Provider 把 state 注入到全局</li>
<li>通过 connect 把 state 和 dispatch 注入到当前组建的 props 上</li>
<li>响应式</li>
</ul>
<p>React-Redux 提供一个 connect 方法能够把组件和 store 连接起来，把 state，dispatch 方法，捏合到当前组件上。connect 有两个参数，两参数都是函数，参数在 connect 内部被调用，参数内能拿到state和dispatch。</p>
<h4 id="实战Demo"><a href="#实战Demo" class="headerlink" title="实战Demo"></a>实战Demo</h4><ul>
<li><strong>把store/reducer/actions结合放在一个文件进行测试</strong></li>
</ul>
<p>![img](redux &amp;&amp; react-redux学习笔记/lALPDgCwXsMbFvzNA8PNBV0_1373_963.png_720x10000.jpg)</p>
<ul>
<li><strong>store 使用</strong><ul>
<li><strong>home.js</strong></li>
</ul>
</li>
</ul>
<p>![img](redux &amp;&amp; react-redux学习笔记/lALPDf0i4B6GMy7NAcrNA_Y_1014_458.png_720x10000.jpg)</p>
<ul>
<li><strong>headerNav.js</strong></li>
</ul>
<p>![img](redux &amp;&amp; react-redux学习笔记/lALPDgCwXsMtsHnNAwjNBEI_1090_776.png_720x10000.jpg)</p>
<ul>
<li><strong>使用细节</strong></li>
</ul>
<ol>
<li>异步请求可以写在页面也可以写在action里，用法可能会有点轻微不一样；</li>
<li>使用父子传值会比connect连接便捷一点，可以直接获取父组件的值，不过如果组件嵌套，使用connect能直接获取到store里的值，connect相当于提供一个方法使所有组件可以直接连接到仓库；</li>
<li>使用父子传值时需要在父组件引用子组件的时候传递一对键值，如**<headerNav name="{user.name}"><strong>；在用connect获取值的时候使用不需要键值，props里会自带，因为</strong>mapStateToProps**已经解决了。</headerNav></li>
</ol>
<h4 id="学习心得与感悟"><a href="#学习心得与感悟" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天和师傅找了很久bug，哈哈找的最久的就是最开始报错说我写的action函数不是函数，我打印了一下确实是undefined，最后发现是reducers属性我少打了个s，真的蛮搞笑的T_T 。新版本不支持createStore，但是很多教程里都是使用的createStore，应该使用configureStore，但是这个的用法和createStore有点区别，所以也报错。找到configureStore问题之后，好像都会搭配使用createSlice，这两个与createStore相比首先来源不一样，<strong>createStore来源react-redux，configureStore来源@reduxjs/toolkit</strong>，configureStore封装了一些东西，简单来说就是使用起来会比较方便，毕竟更新不能往复杂了更吧。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-react项目中mockjs的使用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/react%E9%A1%B9%E7%9B%AE%E4%B8%ADmockjs%E7%9A%84%E4%BD%BF%E7%94%A8/" class="article-date">
      <time datetime="2022-10-14T02:02:41.408Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/react%E9%A1%B9%E7%9B%AE%E4%B8%ADmockjs%E7%9A%84%E4%BD%BF%E7%94%A8/">React项目中mock的使用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="React项目中mock的使用："><a href="#React项目中mock的使用：" class="headerlink" title="React项目中mock的使用："></a>React项目中mock的使用：</h4><p>这个使用方法和在vue中是一样的，所以不是特别困难，不过也是费了一点功夫，我开始以为在react中要export出去才能被组件接收，没想到并不用。</p>
<ul>
<li><strong>在src下创建mock文件夹</strong></li>
</ul>
<p><img src="/2022/10/14/react%E9%A1%B9%E7%9B%AE%E4%B8%ADmockjs%E7%9A%84%E4%BD%BF%E7%94%A8/lALPDeREaYNOg_xSzQEI_264_82.png_720x10000.jpg" alt="img"> </p>
<ul>
<li><strong>创建可拦截请求mock数据</strong></li>
</ul>
<p><img src="/2022/10/14/react%E9%A1%B9%E7%9B%AE%E4%B8%ADmockjs%E7%9A%84%E4%BD%BF%E7%94%A8/lALPDetfZsyxvn3NAy7NBNA_1232_814.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>使用axios进行数据请求</strong></li>
</ul>
<p><img src="/2022/10/14/react%E9%A1%B9%E7%9B%AE%E4%B8%ADmockjs%E7%9A%84%E4%BD%BF%E7%94%A8/lALPDeREaYNttADM-s0Dpw_935_250.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/react%E9%A1%B9%E7%9B%AE%E4%B8%ADmockjs%E7%9A%84%E4%BD%BF%E7%94%A8/lALPDf0i4ATpjsDNAm7NBbI_1458_622.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>获取请求数据并显示到页面</strong></li>
</ul>
<p><img src="/2022/10/14/react%E9%A1%B9%E7%9B%AE%E4%B8%ADmockjs%E7%9A%84%E4%BD%BF%E7%94%A8/lALPDefR6Cg9NOPNAw7NBSQ_1316_782.png_720x10000.jpg" alt="img"></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Webpack配置学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/" class="article-date">
      <time datetime="2022-10-14T02:01:58.484Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/">Webpack学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="webpack学习笔记"><a href="#webpack学习笔记" class="headerlink" title="webpack学习笔记"></a>webpack学习笔记</h4><ul>
<li><strong>学习原因：</strong></li>
</ul>
<p>前端本可以直接HTML、CSS、Javascript就行了，不过如果要处理文件依赖、文件合并压缩、资源管理的时候就得利用工具来辅助了。以往有常见的模块化工具RequireJS，SeaJS等，构建工具Grunt、Gulp等，新的技术Sass、React、ES6、Vue等，要在项目中使用这些东西，不用工具的话就略麻烦了。</p>
<p>其实简单地说要聚焦两点：<strong>模块化以及自动构建。</strong></p>
<p><strong>模块化可以使用RequireJS来处理依赖，使用Gulp来进行构建；也可以使用ES6新特性来处理模块化依赖，使用webpack来构建。但是相对来说webpack会更好一点。</strong></p>
<ul>
<li><strong>核心概念</strong><ul>
<li><strong>entry：</strong>webpack用来构建内部依赖图的开始，包含入口起点依赖的模块和库，可以分离应用程序和第三方库入口，常常使用对象语法，我项目的entry如下：</li>
</ul>
</li>
</ul>
<p><img src="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/lALPDefR6CQ8SWwuzQGB_385_46.png_720x10000.jpg" alt="img"> </p>
<p><img src="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/lALPDgCwXqWa-pAmzQMP_783_38.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>output：</strong>配置webpack输出文件的位置及名称，一般默认值为”./dist”，也就是运行npm build后再项目文件夹下会多出一个dist文件夹，里面就是项目压缩打包后的静态文件，入口可以有多个，但是输出文件只能有一个。我的项目默认设置的output是这样：</li>
</ul>
<p><img src="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/lALPDfJ6ZBLSjzfNBCzNBMw_1228_1068.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>loader：</strong>用于对模块的源代码进行转换。loader 可以使你在 import 或”加载”模块时预处理文件。loader 甚至允许你直接在 JavaScript 模块中 import CSS文件。我之前在项目配置less的时候就用到了这个：</li>
</ul>
<p><img src="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/lALPDeREaYJjpNnNApbNA14_862_662.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>plugins：</strong>目的在于解决loarder无法实现的其他功能，webpack 自身也是构建于，你在 webpack 配置中用到的相同的插件系统之上。webpack 插件是一个具有 apply 属性的 JavaScript 对象。apply 属性会被 webpack compiler 调用，并且 compiler 对象可在整个编译生命周期访问。比如我就在**/.(js|mjs|jsx|ts|tsx)$/**这些文件中尝试配置antd来按需加载样式：</li>
</ul>
<p><img src="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/lALPDf0i4AQASkTNAhTNA4Y_902_532.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>mode：</strong>提供 mode 配置选项，告知 webpack 使用相应模式的内置优化。取值有两个，<strong>production/development</strong>，默认值是 production。分别用 production 和 development 打包，编译的区别如下：</li>
</ul>
<p>1、development打包后，一些没有依赖的方法、变量、文件会保留；而 production 则会移除。</p>
<p>2、production 打包后，代码会进行压缩，比 development 的文件小。</p>
<p>我的项目自带的根据需要进行取值：</p>
<p><img src="/2022/10/14/Webpack%E9%85%8D%E7%BD%AE%E5%AD%A6%E4%B9%A0/lALPDfYH4rqTpbEuzQRU_1108_46.png_720x10000.jpg" alt="img"></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-CLP-SHOPPING 项目仿写踩坑记录" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/" class="article-date">
      <time datetime="2022-10-14T01:58:38.065Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">CLP-SHOPPING仿写踩坑记录</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h3 id="商城项目实战①"><a href="#商城项目实战①" class="headerlink" title="商城项目实战①"></a>商城项目实战①</h3><p><strong>项目名称：</strong>NiceDay</p>
<p><strong>技术栈：</strong>React + ReactHook + ReactRouter + Redux + Axios +other</p>
<p><strong>计划完成功能：</strong></p>
<ul>
<li>首页展示</li>
</ul>
<p><strong>计划完成进度：</strong>1/7 days</p>
<h4 id="学习困难"><a href="#学习困难" class="headerlink" title="学习困难:"></a>学习困难:</h4><ol>
<li><strong>环境构建：</strong></li>
</ol>
<ul>
<li><strong>项目环境：</strong>create-react-app 脚手架构建项目<ul>
<li>npx create-react-app NiceDay</li>
</ul>
</li>
<li><strong>支持less语法：</strong><ul>
<li>执行命令：npm run eject（注意使用此命令src不能有任何修改）</li>
<li>安装依赖：cnpm install –save-dev less less-loader</li>
<li>修改webpack.config.js文件：</li>
</ul>
</li>
</ul>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeC26oWvC1pgzQK5_697_96.png_720x10000.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeREaSrIop7Mlc0Cqw_683_149.png_720x10000.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i36wsYCDNBN7NAxI_786_1246.png_720x10000.jpg)</p>
<ul>
<li><strong>集成网络请求Axios</strong><ul>
<li>安装依赖：cnpm i –save axios</li>
<li>配置相关文件：<ul>
<li>axios文件request.js：二次封装</li>
<li>接口文件api.js：请求方法</li>
</ul>
</li>
</ul>
</li>
<li><strong>设置rem布局</strong></li>
</ul>
<p>在index.html文件中添加动态rem计算方法</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfYH4mhjj6fNAsDNBR8_1311_704.png_720x10000.jpg)</p>
<ul>
<li><strong>配置初始样式</strong></li>
</ul>
<p>引入iconfont文件：这里我使用的是阿里矢量图标库，然后在页面导入</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeREaSuZVQbM6Mzy_242_232.png_720x10000.jpg) </p>
<ol start="2">
<li><strong>路由配置</strong></li>
</ol>
<ul>
<li><strong>创建页面：</strong>Home/Life/Shop/User</li>
<li><strong>创建路由：</strong><ul>
<li>安装依赖：cnpm i –save react-router-dom</li>
<li>配置路由：</li>
</ul>
</li>
</ul>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i365eZDnNAb7NA_g_1016_446.png_720x10000.jpg)</p>
<h4 id="学习心得与感悟"><a href="#学习心得与感悟" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>由于教程并非最新教程的原因，在观看实战教程时搭建项目也遇到些许问题，很多出现在版本问题。比如最新版react已经不支持querystring、Switch、component等，已经改为最新版本的URLSearchParams/Routes/element…</p>
<p><strong>① less配置：</strong>开始配置less后却一直不生效，查找了一番归结于版本问题，于是降版本安装less-loader5.0.0版本，成功生效。</p>
<p><strong>②</strong> <strong>路由配置：</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeREaSwNWRsqzQQX_1047_42.png_720x10000.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i362Qen1SzQOS_914_82.png_720x10000.jpg)</p>
<p>配置时出现这些报错原因均为’Switch’ 和’Redirect’ 是 react-router 5版本的接口，而最新版本是”react-router-dom”: “^6.2.1”，并且已经将Switch改为Routes。</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i364VRbrMps0DAQ_769_166.png_720x10000.jpg)</p>
<p>由于component已经被替换成element，在使用时不能：</p>
<p>&lt;Route exact path=”/“ element={ Home }&gt;</p>
<p>而是：</p>
<p>&lt;Route exact path=”/“ element={ <Home> }&gt;</Home></p>
<p>终于不再报错，成功运行。</p>
<p><strong>③导航样式：</strong></p>
<p>NavLink的默认颜色为蓝色而且带有下划线，消除下划线需要text-decoration：none，更改颜色需要给NavLink定义加一个className，然后再写样式color：gray；</p>
<p><strong>今天的任务并不算很多，但是既要跟上配置思路，又要自己重新敲一遍代码，还有很多很多的版本问题，纠错基本上就花了至少1-2h，很多时候是这个问题解决又引发下一个问题，不过这也很好地锻炼了我的解决问题能力，之前自己写项目的时候不是特别规范，很多细节都是随便处理，解决了就行了，完全不管他代码的整洁程度以及有没有将代码分类。我相信在跟练完这个实战项目后我也可以独立开发出一个质量较高的项目！</strong></p>
<h3 id="商城项目实战②"><a href="#商城项目实战②" class="headerlink" title="商城项目实战②"></a>商城项目实战②</h3><p><strong>项目名称：</strong>NiceDay</p>
<p><strong>技术栈：</strong>React + ReactHook + ReactRouter + Redux + Axios +other</p>
<p><strong>计划完成功能：</strong></p>
<ul>
<li>首页展示</li>
<li>充值中心</li>
<li>选择套餐</li>
<li>购物中心</li>
<li>商品详情</li>
<li>个人中心</li>
<li>个人详情</li>
<li>登录注册</li>
</ul>
<p><strong>计划已进行：</strong>2 days</p>
<p>由于个人能力+精力+条件有限，仅能实现部分界面。</p>
<p><strong>今日参考界面：</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXmOn0U7NBDTNA2o_874_1076.png_720x10000.jpg)</p>
<h4 id="学习困难-1"><a href="#学习困难-1" class="headerlink" title="学习困难:"></a>学习困难:</h4><ol>
<li><strong>修改底部导航</strong></li>
</ol>
<ul>
<li><strong>代码规范问题</strong></li>
</ul>
<p>今天师傅给我发了一份公司的ES6规范，本来是下载FishX插件当做Eslint用，但是不知道为啥在我电脑上没作用，所以还是用的Prettier插件，还可以一键格式刷，方便又快捷。</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDefR5-JFHgV0zQQu_1070_116.png_720x10000.jpg)</p>
<ul>
<li><p><strong>图标问题</strong></p>
</li>
<li><p>之前用的<i>写的图标，但是师傅给的这个设计稿只能将图标图片下载到本地，奈何 i 标签没有src属性，于是改用<img>：</i></p>
</li>
</ul>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDe7s5SuFHuVIzQOp_937_72.png_720x10000.jpg)</p>
<ul>
<li>写了之后图片刷不出来，以为是地址问题/名称问题纠结了十几分钟问师傅，原来是react导入图片地址要先import图片路径给变量，然后导入变量才可以：</li>
</ul>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i376nJPYzzQQ5_1081_51.png_720x10000.jpg)</p>
<p>图标问题就此解决</p>
<ul>
<li>框架问题</li>
</ul>
<p>在昨天写的界面中我的框架是这样的，每一个都单独写出来，代码十分冗余。</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDetfZoa-A3bNArfNA_Y_1014_695.png_720x10000.jpg)</p>
<p>师傅说但是为了代码美观简洁，开发中会将li的数据写成数组，进行遍历，要求尽量将数据格式mock成接口返回的格式，方便后续接口调试，减少工作量。在此之前我只写过vue的多级菜单有采用到v-for循环遍历填充，今天学习了<strong>在react中采用map遍历数组</strong>的方式进行高效开发：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfmVYRnn6ZDNAwvNBjc_1591_779.png_720x10000.jpg)</p>
<p>然而我还是太天真了，想要将图标名和图标地址一起传入li中，于是创造出了这样一个四不像的”数组”，报错后又去求救师傅，师傅说我的对象数组写的不像mock格式，让我将图表名和地址都放在对象里，给他们分别加上键名。于是我顺利完成：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfYH4nVdph_NA03NBVo_1370_845.png_720x10000.jpg)</p>
<ul>
<li><strong>定位问题</strong></li>
</ul>
<p>通过上面操作，我们已经可以得到如下导航栏：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfJ6Y9C8YCLMvs0C7g_750_190.png_720x10000.jpg)</p>
<p>显然跟设计稿还有些差别，这个问题我第一想法是：绝对定位。但我很快认识到这样子是行不通的，我既然已经遍历数组生成了li，那我应该只需要把他们做底部对齐就行，所以很快就想到了<strong>flex+align-items</strong>的用法，成功解决问题~</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfYH4nV1mBrMt80DOw_827_183.png_720x10000.jpg)</p>
<ol start="2">
<li><strong>修改顶部导航</strong></li>
</ol>
<p>有了底部导航栏的实践，顶部导航栏对我来说容易多啦，需要注意的是对齐问题以及间距问题</p>
<ul>
<li><strong>框架</strong></li>
</ul>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDetfZocrFJDNAgrNBQg_1288_522.png_720x10000.jpg)</p>
<ul>
<li><strong>样式</strong></li>
</ul>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfmVYRpeirLNApXNBHw_1148_661.png_720x10000.jpg)</p>
<ul>
<li><strong>界面</strong></li>
</ul>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfYH4nWIfwvMjs0Ddg_886_142.png_720x10000.jpg)</p>
<ol start="3">
<li><strong>今日完成界面</strong></li>
</ol>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfJ6Y9DKtgLNBQLNAz0_829_1282.png_720x10000.jpg)</p>
<ol start="4">
<li><strong>今日遗留问题：</strong></li>
</ol>
<p>可以看到底部导航栏的字体颜色，按道理说应该在进入界面时默认情况下home字体与图标为标蓝状态，而后哪个按键被点击哪个就会标蓝，但是我采用的是NavLink编写的路由跳转，所以即使给它样式覆盖也只能做到开始时统一为黑色，当点击时才会标蓝。师傅说我可以用a标签写，自定义点击事件跳转与状态改变，这样子可以解决问题。师傅的思路我理解了，但还没来得及实现，我的想法是目前先把静态页面做完，等到页面大致做完后再加入js事件，完善细节问题。</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfYH4nV1mBrMt80DOw_827_183.png_720x10000-166538606400154.jpg)</p>
<h4 id="学习心得与感悟-1"><a href="#学习心得与感悟-1" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>从今天早上开始看到公司开发规范的时候就知道我要学习的东西还有很多，我不能为了实现界面和功能而不管代码的清晰度，简洁度以及美观度，而是要在完成的基础上一定要做到代码规范问题。在我之前的项目开发中，代码有点乱七八糟（应该不止一点），对于团队协作以及后期维护来说简直是灾难，经过这次仿写项目，我要做到代码规范+实现react开发项目，了解到更多react的相关开发知识。明天的开发应该会比今天的进展要顺利一些，今天在编写代码时，有很多问题都思考欠缺，比如导航栏定位问题，想当然的先用绝对定位去做了，结果师傅不仅纠正了我的代码简洁规范，还纠正了我开发时的错误思想，是我的代码救命之星。最后感谢小马哥给我安排上了大显示屏，我的神！</p>
<h4 id><a href="#" class="headerlink" title></a></h4><h3 id="商城项目实战③"><a href="#商城项目实战③" class="headerlink" title="商城项目实战③"></a><strong>商城项目实战③</strong></h3><p><strong>项目名称：</strong>NiceDay</p>
<p><strong>技术栈：</strong>React + ReactHook + ReactRouter + Redux + Axios +other</p>
<p><strong>计划完成功能：</strong></p>
<ul>
<li>首页展示</li>
<li>充值中心</li>
<li>选择套餐</li>
<li>购物中心</li>
<li>商品详情</li>
<li>个人中心</li>
<li>个人详情</li>
<li>登录注册</li>
</ul>
<p><strong>计划已进行：</strong>3 days</p>
<p><strong>今日参考设计稿：(已划分盒模型)</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDefR5_Ao_9rNAjDNA2w_876_560.png_720x10000.jpg)</p>
<h4 id="学习困难-2"><a href="#学习困难-2" class="headerlink" title="学习困难:"></a>学习困难:</h4><ol>
<li><strong>创建顶部主要功能栏</strong></li>
</ol>
<ul>
<li><strong>宽高问题：</strong></li>
</ul>
<p>写这个功能栏的时候，采用的ul+li结构，跟昨天一样用的数组遍历生成li，但是我犯了一个小错误，我将ul的宽度设置成了100%，导致如下问题：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXnGPKmbNBp7NA-Q_996_1694.png_720x10000.jpg)</p>
<p>可以看到横向和纵向都出现了滚动条，无法看到完整界面，我询问师傅后，师傅提示我滚动条出现的原因是因为里面的元素宽度或者高度大于外面的元素，然后让我去思考是哪个元素的高或者宽有问题。我今天有问过师傅，是不是在开发H5项目的时候所有的px都要写成rem，师傅给予肯定回答，所以当我在查找错误元素时，发现我有设置过ul：100%，顿时恍然大悟，将其改为和设计稿对应尺寸的rem布局瞬间恢复正常。<strong>外层盒子尽量不要设置宽高，因为你无法肯定它的大小，尽量使它的宽高是被元素撑起来的。</strong></p>
<ol start="2">
<li><strong>创建PostPaid卡片栏</strong></li>
</ol>
<ul>
<li><strong>框架问题</strong></li>
</ul>
<p>在看见卡片的设计稿时，我有一点点不知道从何下手，它的盒子该怎么嵌套，我开始的想法：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDetfZpUX9zXNAZLNA4g_904_402.png_720x10000.jpg)</p>
<p>但是我很快否定了，这样会有一些地方不好对齐，实现难度增加，在询问了师傅的意见后，我的框架改成了：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfmVYSgIRuTNAmPNBMM_1219_611.png_720x10000.jpg)</p>
<ul>
<li><strong>div大小问题</strong></li>
</ul>
<p>在开发points部分的时候，我遇到了一个非常棘手的问题：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfJ6Y96jJy_NAsrNAn0_637_714.png_720x10000.jpg) </p>
<p>这个问题困扰了我将近一个小时，**为什么div的高度会远远大于内部元素高度(我并没有设置宽高)**，很难解决，我去搜索不知道该怎么搜，后面一起和师傅好好研究了十来分钟，发现是fontsize捣的鬼，我的fontsize默认为50px，方便计算rem，然而这50px的基准值可干扰到了div的高度：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfJ6Y96Na3jNAh7NAt4_734_542.png_720x10000.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDetfZpUjBCQnzQIE_516_39.png_720x10000.jpg) ![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXnHCKQJszPI_242_108.png_720x10000.jpg) </p>
<p>通过上面三个证据可以看到 <strong>div高度 = font-size + 元素高度</strong>，这下真相大白，有了上网搜索的关键词了，一搜还真让我找到了：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i380JmtHNAyPNBtU_1749_803.png_720x10000-16657178594531.jpg)</p>
<p>我尝试了第一种：white-space：pre-line，可惜没有作用，于是我使用第二种：<strong>在全局公共样式里加上font-size：0px；</strong>问题解决了，就在我和师傅说的时候，他说这种做法可以暂时解决问题，但<strong>并不是一劳永逸的</strong>方法，为什么呢，如下：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfYH4oNmt5PNATjNBVA_1360_312.png_720x10000.jpg)</p>
<p>所以说这种方法只能做到解决部分div宽高问题，如果全局适用会对后面的代码产生影响，我想要彻底解决问题应该需要将font-size基准值调整到合适大小。</p>
<ol start="3">
<li><strong>今日遗留问题</strong></li>
</ol>
<p><strong>我的图：</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDefR5_CYSc5ZzQK-_702_89.png_720x10000.jpg)</p>
<p><strong>设计稿：</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXnHrR6RIzQKQ_656_72.png_720x10000.jpg)</p>
<p>我开发的界面两条小竖线没有对齐，我还没有想到合适的方法加，本来说在存储数字的div右边边框加上border就能实现，但是这个布局用的flex而且单位长度不一样，边框的效果看起来就不是对齐的，我在思考是将div宽度再设置的合理一些，还是加margin什么的，又是今日留下来的小问题！</p>
<ol start="4">
<li><strong>今日完成界面</strong></li>
</ol>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDetfZpWbh-PNBQbNA0Y_838_1286.png_720x10000.jpg)</p>
<h4 id="学习心得与感悟-2"><a href="#学习心得与感悟-2" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><ol>
<li>开发规范：</li>
</ol>
<ul>
<li>在开发web时大小使用px，但开发移动端项目时大小使用rem；</li>
<li>尽量不要给外层盒子定义宽高，以免开发到后期出现问题不好返工；</li>
<li>开发中尽量不使用id设计样式，采用class会方便许多，class的定义最好按照功能来，这样哪个元素需要只需要加上class就行，class可以对应多个元素。</li>
</ul>
<ol start="2">
<li>设计细节</li>
</ol>
<p>我觉得很难的一点就是前端开发中所有元素大小间距定义都要根据设计稿来，非常非常揪细节，也许偷懒只想复现的时候看起来差不多就行了，但是绝对不能这样子，不能为了偷一时懒不顾项目的安危。</p>
<p>今天的开发进度依旧不是很快，常常会在一些细节地方卡住，导致完成效率不高，终归还是练习的不够多，目前的css不够熟练(等到界面开发完可能就是js不熟练了哈哈)，只能勤能补拙，每天做好自己的任务，不会的尽量自己解决，实在解决不了的就问师傅，可以重点培养自己解决问题的能力，加深对知识点的印象。好好写日志就相当于给自己每天的工作记录重点内容，建立好的错题本，是以后开发中必不可少的步骤！(明天要开发的应该要借用到antd-mobile里的swiper，今天浅看了一下，没有太看懂，明天早上再细细研究)</p>
<h4 id="-1"><a href="#-1" class="headerlink" title></a></h4><h3 id="商城项目实战④"><a href="#商城项目实战④" class="headerlink" title="商城项目实战④"></a><strong>商城项目实战④</strong></h3><p><strong>项目名称：</strong>NiceDay</p>
<p><strong>技术栈：</strong>React + ReactHook + ReactRouter + Redux + Axios +other</p>
<p><strong>计划完成功能：</strong></p>
<ul>
<li>首页展示</li>
<li>充值中心</li>
<li>选择套餐</li>
<li>购物中心</li>
<li>商品详情</li>
<li>个人中心</li>
<li>个人详情</li>
<li>登录注册</li>
</ul>
<p><strong>计划已进行：</strong>3 days</p>
<p><strong>今日参考设计稿：(已划分盒模型)</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXnthbyjNA4zNBAA_1024_908.png_720x10000.jpg)</p>
<h4 id="学习困难-3"><a href="#学习困难-3" class="headerlink" title="学习困难:"></a>学习困难:</h4><ol>
<li><strong>创建功能滑动界面</strong></li>
</ol>
<ul>
<li><strong>Tabs+Swiper组合</strong></li>
</ul>
<p>一开始打算使用这俩组合开发这个界面的时候，没有很熟练，我想要做到既遍历循环生成li，又使li有两排，我的最初想法是一个div内嵌套两个ul，然后每个ul各自遍历长度为4的数组生成2*4的布局，如下：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i39bMSLDNBFPNA3k_889_1107.png_720x10000.jpg)</p>
<p>结果这种方式生成了2*8的结构，于是我求救了师傅…</p>
<p>师傅说我可以创建长度为8的数组，只使用一个ul循环就行，既解决问题又减少代码冗余。事实证明确实可以哈：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeC26rCtgzHNAsLNA9M_979_706.png_720x10000.jpg)</p>
<p>最后的整体swiper+tabs长这样：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeC26rC7fGvNAlPNBOU_1253_595.png_720x10000.jpg)</p>
<ul>
<li><strong>tabs标题栏问题</strong><ul>
<li><strong>下划线问题</strong></li>
</ul>
</li>
</ul>
<p>由于用的antd-mobile里的组件，所以样式很多都是自带的，并不好修改。比如我没法直接修改它的标题栏选中时的下划线，至少不能用图片直接代替。</p>
<p><strong>自带的：</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfmVYTJRDz7MlM0C6A_744_148.png_720x10000.jpg)</p>
<p><strong>设计稿：</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDe7s5UQM3F9-zQMG_774_126.png_720x10000.jpg)</p>
<p>不过师傅给了我一个非常棒的思路：可以<strong>试试用伪元素替换一个图标上去/画一个半圆</strong>。因为有图标素材，所以直接使用的伪元素添加图片：![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i39c_rbHNAozNBMw_1228_652.png_720x10000.jpg)</p>
<p>前提是要<strong>先隐藏之前的下划线，然后使用伪元素::after放在title下面，再水平居中</strong>就可以。</p>
<ul>
<li><strong>大小问题</strong></li>
</ul>
<p>我之前的底部导航栏+顶部功能栏+卡片界面宽度全部设置的rem大小，突然出现的tabs宽度影响到了整体的布局，虽然他也只有375px的宽度，但是整个盒子都被他撑开了，造成左右出现间隙：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDe7s5UQpGZ3NASfNA74_958_295.png_720x10000.jpg)</p>
<p>我思考了一会**把之前的所有ul、div只要是设置了rem宽度的全部改成100%**，果然界面恢复正常，不再左右滑动。</p>
<ul>
<li><strong>文字换行问题</strong>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXnwoDOLMms0C5w_743_154.png_720x10000.jpg)</li>
</ul>
<p>在设计图中，可以看到功能名称都是一个单词占据一行，但是我用的span做不到换行：![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDe7s5UQ0kMXM4szB_193_226.png_720x10000.jpg) </p>
<p>我想了很久问了师傅，师傅给了我一个解决方案：<strong>将ul的flex-wrap设置为wrap，把li的宽度设为min-content</strong>：![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfmVYTKUYF7NBTjNC7I_2994_1336.png_720x10000.jpg)</p>
<p>但是这样依旧没有解决问题，我的排版甚至变得混乱，于是我选择使用p标签框住文字，然后所有改动在p标签内进行，成功实现：(当然最主要的还是<strong>flex-wrap: wrap</strong>)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDetfZp-HaBfNAxTNBFo_1114_788.png_720x10000.jpg)</p>
<ol start="2">
<li><strong>创建广告图</strong></li>
</ol>
<p>这个基本上就只需要加一个图片，成果如下：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i39dyXFnNAeLNA9c_983_482.png_720x10000.jpg)</p>
<ol start="3">
<li><strong>返工之前代码</strong></li>
</ol>
<ul>
<li><strong>图片尺寸</strong></li>
</ul>
<p>每个图片都要设置宽/高，给一个就行，因为图片宽高比是固定的。之所以要设置尺寸是因为如果屏幕大小不一样，图片可能在大屏手机和小屏手机上看着效果不一样，统一rem尺寸看起来差别就不会很大。</p>
<ul>
<li><strong>框架设计</strong></li>
</ul>
<p>这个是师傅看见我的顶部导航栏给我的建议，开发之前研究界面的时候可以把整体框架先设计好，比如我的导航栏是贴着顶部的，加了个margin，但其实在开发中一般会选择在最外层边框加个padding就解决了，结构看着也清晰一些，不会出现margin塌陷问题。</p>
<ol start="4">
<li><strong>今日遗留问题</strong></li>
</ol>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDetfZp_Gd3XMrs0DcA_880_174.png_720x10000.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXnx0VMfMkM0D2g_986_144.png_720x10000.jpg)</p>
<p>可以看到我的两个标题之间距离跟设计图上并不一致，我有尝试过修改tabs的样式，比如把padding去掉、把space-around改成space-between或者是修改他们外层div的宽度，但这些都没有效果，起码尝试修改了有一个小时吧，但是还是做不到，毕竟这个东西是封装好的，我暂时还没有解决办法，也许以后会有。</p>
<ol start="5">
<li><strong>今日成果展示</strong></li>
</ol>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i39mO_jDNBO3NA8E_961_1261.png_720x10000.jpg)</p>
<h4 id="学习心得与感悟-3"><a href="#学习心得与感悟-3" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天为止就是把首页的页面写完了，还有一些小的细节没写，比如说点击更多会出现下拉菜单，点击菜单栏右侧会出现滑动菜单之类的交互还没有开始写。今天学到了swiper+tabs布局完成标签页的制作，以及一些代码规范，比如上面说的图片尺寸和框架搭建问题，不能想当然的去写，要知道这些规范设计的原因。下一步的计划是想完善未完成的细节问题，在这过程中尽力解决遗留问题，其次就是尝试调用接口去展示数据，而不是像现在一样是一个静态界面。在调用接口时肯定会出现其它问题，就像师傅说的不定长文本过长溢出了怎么办（css解决单行文本溢出），不同长度的文字布局展示间距怎么办，这都是接下来我需要面临的问题。</p>
<hr>
<h3 id="商城项目实战⑤"><a href="#商城项目实战⑤" class="headerlink" title="商城项目实战⑤"></a><strong>商城项目实战⑤</strong></h3><p><strong>项目名称：</strong>NiceDay</p>
<p><strong>技术栈：</strong>React + ReactHook + ReactRouter + Redux + Axios +other</p>
<p><strong>计划完成功能：</strong></p>
<ul>
<li>首页展示</li>
<li>充值中心</li>
<li>选择套餐</li>
<li>购物中心</li>
<li>商品详情</li>
<li>个人中心</li>
<li>个人详情</li>
<li>登录注册</li>
</ul>
<p><strong>计划已进行：</strong>4 days</p>
<h4 id="学习困难-4"><a href="#学习困难-4" class="headerlink" title="学习困难:"></a>学习困难:</h4><ol>
<li><strong>新增下拉菜单</strong></li>
</ol>
<ul>
<li><strong>Dropdown组件</strong></li>
</ul>
<p>来自ant design的组件，不过使用起来感觉不是很好，比如刚开始使用的时候效果如下：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfYH4q6GkcvNATzNA3Q_884_316.png_720x10000.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfJ6ZAnNAYrNBEDNA9Y_982_1088.png_720x10000-16657179146073.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDf0i3_gHFivMpc0DfQ_893_165.png_720x10000.jpg)</p>
<p>我问了师傅，师傅说我的antd样式没有生效，比如点击li后下面没有关于antd的class样式，之后知道应该是由于我的是react项目直接拿脚手架建的，不是用的umi，导致webpack配置没有弄好，需要自己引入antd.css，所以加了一条：<strong>import ‘antd/dist/antd.css’;</strong></p>
<p>但是，就是因为加这么一句，导致我其他地方本来写好的地方又开始布局混乱，像这样：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDefR6Bt5ghvNAljNAx0_797_600.png_720x10000.jpg)</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXpz38FbNAhLNAsA_704_530.png_720x10000.jpg)</p>
<p>我的所有文字标签都被自动增加了一个和我fontsize一样大的margin，这个地方纠结了至少一个小时，最后师傅和我说是因为antd样式覆盖了全局的样式，我觉得antd这个组件好难用啊，要达到设计图的效果需要费好大功夫，所以我把dropdown组件去掉了，原生写了一个下拉菜单组件，目前是这个样子：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDgCwXpz57N3NARrNAyg_808_282.png_720x10000.jpg)</p>
<p>等到我把antd样式覆盖问题解决好了再考虑用antd吧，其实除了样式覆盖问题，由于我这是img，而官方举例采用的都是button，导致这样点击后下拉菜单的样式和位置对我来说都挺难调整的。</p>
<ol start="2">
<li><strong>新增mini功能滑动小程序：</strong></li>
</ol>
<ul>
<li><strong>min-content</strong></li>
</ul>
<p>之前写上一个hot功能滑动小程序的时候，由于单词很短也需要换行，所以在p标签内加了一个width：min-content，但是写mini功能的时候不需要，不然就变成了这样：</p>
<p>我写的：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeC26tIG2-nNAp3NBCI_1058_669.png_720x10000.jpg)</p>
<p>设计稿：</p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDefR6BuRsXrNAh7NAxI_786_542.png_720x10000.jpg)</p>
<p>在意识到应该是min-content引发的问题之后，我单独给hot功能界面设置了一个class，其他的为默认，这样就解决问题了。</p>
<ol start="3">
<li><strong>今日遗留问题：</strong></li>
</ol>
<p>今天引发的问题就是antd的样式覆盖了全局样式的问题，以及我的项目每次启动进去的时候都会有横向滚动条，但是刷新几次后又恢复，不知道什么原因，打算抽空仔细看<strong>《CSS世界》</strong>纠错。这本书很好，强烈推荐给大家，包括它的新版<strong>《CSS新世界》</strong>。</p>
<ol>
<li><strong>今日完成界面：</strong></li>
</ol>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDeREaXbSx6XNBOnNA24_878_1257.png_720x10000.jpg)</p>
<h4 id="学习心得与感悟-4"><a href="#学习心得与感悟-4" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天也算是特别感受到了什么叫做一台电脑一杯水，一个bug改一天的感觉。今日进度勉强完成，还有些没有完成，不过首页的，剩下的很多功能都是需要接口的，比如根据用户登录状态判断postcard组件的展示状态，包括点击菜单弹出侧边菜单，都是还没有实现的。写前端没有想象中容易，要考虑的地方很多，遇到的问题也有很多，不适配、版本不一致、属性冲突等等，而且还要考虑代码的美观、简洁。明天研究一下webpack的配置，看看能不能解决antd样式问题，接口方面尝试mock模拟数据看看有没有问题。一个项目真的不能是一个人的心血，起码也得是一群人的心血，一个人写可能几个月也做不好一个像样的项目，太多的逻辑需要考虑。明天继续加油。</p>
<h3 id="商城项目实战⑥"><a href="#商城项目实战⑥" class="headerlink" title="商城项目实战⑥"></a><strong>商城项目实战⑥</strong></h3><p><strong>项目名称：</strong>NiceDay</p>
<p><strong>技术栈：</strong>React + ReactHook + ReactRouter + Redux + Axios +other</p>
<p><strong>计划完成功能：</strong></p>
<ul>
<li>首页展示</li>
<li>登录注册</li>
</ul>
<p><strong>计划已进行：</strong>5 days</p>
<p><strong>今日完成界面：</strong></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDefR6E4yKknNAvbNAfI_498_758.png_720x10000.jpg) </p>
<p>由于只是想写一个测试用的登录，所以就没有写成各个组件了，全部写在login.js一个文件里。</p>
<h4 id="学习困难-5"><a href="#学习困难-5" class="headerlink" title="学习困难:"></a>学习困难:</h4><ul>
<li><strong>输入框输入无效问题</strong></li>
</ul>
<p>因为我引入antd会导致覆盖全局样式，所以用的是原生表单，修改样式写的，但是遇到了一些小问题：首先是报警告说我没有写onChange属性，看到后我就加了，但是name、value都是默认的；之后就是输入文字但不显示，我在网上没有搜索到答案，问了师傅后，师傅说因为我写了**value=””**，这个表示实时更改，只要input输入框内容发生变化就会自动替换为value，也就是空的，所以我输入什么内容都失败。</p>
<p><img src="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/lALPDf0i4Cs-_xfNASrNA8Y_966_298.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>底部导航栏问题</strong></li>
</ul>
<p>我之前写的bottomBar组件使用的fixed定位，所以为了可以在每个页面都显示底部栏，就把他放在了router.js里面，但是这样子登录注册界面也会有导航栏，这个问了师傅，说是要写两套不同布局，但我还没搞明白，暂时遗留问题，尽量这两天解决。</p>
<ul>
<li><strong>获取token问题</strong></li>
</ul>
<ol>
<li><strong>新增username&amp;&amp;userpwd数据，初始值为空，绑定store</strong></li>
</ol>
<p><img src="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/lALPDetfZvPKFFjNBB7NAtY_726_1054.png_720x10000.jpg" alt="img"></p>
<ol start="2">
<li><strong>在actions.js的setLogin方法中添加异步数据请求，设置token</strong></li>
</ol>
<p><img src="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/lALPDfJ6ZD074iXNAvrNAt8_735_762.png_720x10000.jpg" alt="img"></p>
<p>![img](CLP-SHOPPING 项目仿写踩坑记录/lALPDfmVYYbjHl_NAXXNAvc_759_373.png_720x10000.jpg)</p>
<ol start="3">
<li><strong>解析token</strong></li>
</ol>
<p><img src="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/lALPDeREaapDYSDNA6LNAto_730_930.png_720x10000.jpg" alt="img"></p>
<p><img src="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/lALPDe7s5ZiTV3rNAtjNAtg_728_728.png_720x10000.jpg" alt="img"></p>
<ol start="4">
<li><strong>页面判断用户输入</strong></li>
</ol>
<p><img src="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/lALPDfJ6ZD1czTrNAQ7NA2Y_870_270.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>页面刷新数据消失问题</strong></li>
</ul>
<p><img src="/2022/10/14/CLP-SHOPPING%20%E9%A1%B9%E7%9B%AE%E4%BB%BF%E5%86%99%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/lALPDeC26wV7S43NA0DNAzo_826_832.png_720x10000.jpg" alt="img"></p>
<h4 id="学习心得与感悟-5"><a href="#学习心得与感悟-5" class="headerlink" title="学习心得与感悟:"></a>学习心得与感悟:</h4><p>今天写页面写了四五个小时，解决token问题不是很顺利，看到的教程有自己写后台接口的哈哈，但是我这只能自己模拟，所以麻烦了一点，主要解决就是路由传参，不过我觉得可能我的路由实现方式不是太好，这两天看看能不能改成适合项目使用的方式，还剩下的底部导航栏问题，可能就是由于不适合写在路由里。我看了clp项目的源码，暂时没找到入口文件在哪，和我的好像有点差别，所以也无法借鉴这个项目来更正。这两天目标是解决导航栏问题，深入学习下现在的多种路由实现及跳转方式。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-Umi学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/Umi%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="article-date">
      <time datetime="2022-10-14T01:55:14.257Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/Umi%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Umi学习笔记</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h4 id="Umi框架入门学习笔记"><a href="#Umi框架入门学习笔记" class="headerlink" title="Umi框架入门学习笔记"></a>Umi框架入门学习笔记</h4><p><strong>umi入门介绍：</strong>umi是阿里研发的一个可插拔的react应用框架，是一个方便react开发的前端框架，配置路由、构建、打包部署什么的省了不少事。不过如果你想自己DIY用wbepack打包、配置其他的路由方式什么的就不太适合，因为他相当于为了方便给你统一了流程，就像寄快递一样，可以自己打包好去寄，也可以让菜鸟驿站给你打包，那样可能就根据他们统一的流程，不能自己DIY。</p>
<p><strong>umi创建项目：</strong>官方推荐是使用yarn，不过你要用npm、cnpm应该也是可以的，然后使用脚手架@umijs/create-umi-app创建项目就行，下载依赖npm i / yarn，启动就npm run start/yarn start。如果需要使用其他的组件库，还需要修改配置：编辑 umirc.ts配置 layout{}+安装组件</p>
<p><strong>umi项目结构：</strong>快速上手阅读项目必备组织结构指南！学完umi就麻溜看项目</p>
<p><img src="/2022/10/14/Umi%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDfmVYMcVjTXNAm7NBNk_1241_622.png_720x10000.jpg" alt="img"></p>
<p><strong>umi配置：</strong>在umi给的官方文档中，相比于JavaScript，umi其实更支持TypeScript。虽然说JS也已经升级到ES6了，但是TS相对来说会比JS更实用。TS实际上是JS的一个超集，同样支持ES6，可以编译为纯JS，可以运行在任何浏览器上，更适用于开发大型应用。</p>
<p><strong>umi配置路由：</strong>在umi中配置路由是通过routes进行的，形如</p>
<p><img src="/2022/10/14/Umi%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDfmVYMgPER_NAQPNA4Y_902_259.png_720x10000.jpg" alt="img"></p>
<p>这个形式已经非常接近vue中的路由配置了</p>
<p><img src="/2022/10/14/Umi%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDfYH4iMbDAHNAh3NAxs_795_541.png_720x10000.jpg" alt="img"></p>
<ul>
<li><strong>子路由：</strong>配置子路由时，umi中使用routes中嵌套routes，而vue中使用routes中嵌套children；</li>
<li><strong>重定向：</strong>通过redirect:’path’进行重定向，umi和vue一致；</li>
<li><strong>路由跳转：</strong></li>
</ul>
<p>如果是声明式，umi导入link并在界面使用<link>;vue则使用<router-link>进行界面跳转</router-link></p>
<p>命令式：umi中的history/hash模式为先导入，然后直接调用</p>
<p><img src="/2022/10/14/Umi%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDeC26ka5cazNATTNApE_657_308.png_720x10000.jpg" alt="img"></p>
<p>命令式：vue中的history/hash只需要在router.js中声明mode:’history’/‘hash’直接配置，跳转路由时使用this.$router.push(‘path’)</p>
<ul>
<li><strong>约定式路由：</strong>约定式路由也叫文件路由，就是不需要手写配置，文件系统即路由，通过目录和文件及其命名分析出路由配置。类似Java中的文件结构，比如必须有个项目文件夹，一个源文件夹，一个包，包下面才能创建Java文件。只要满足这种目录结构，会自动生成包名路径。</li>
<li><strong>Mock文件：</strong>umi中mock的用法和vue中基本一致，形如：</li>
</ul>
<p><img src="/2022/10/14/Umi%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/lALPDetfZjXXmRTNAkzNA94_990_588.png_720x10000.jpg" alt="img"></p>
<p>使用umi对于 react 项目来说会方便许多，比如 路由、redux 等都有所帮助。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-React 与 Vue 的区别" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/14/React%20%E4%B8%8E%20Vue%20%E7%9A%84%E5%8C%BA%E5%88%AB/" class="article-date">
      <time datetime="2022-10-14T01:50:04.588Z" itemprop="datePublished">2022-10-14</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/14/React%20%E4%B8%8E%20Vue%20%E7%9A%84%E5%8C%BA%E5%88%AB/">React 与 Vue 区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="React-amp-Vue细节比较："><a href="#React-amp-Vue细节比较：" class="headerlink" title="React&amp;Vue细节比较："></a>React&amp;Vue细节比较：</h2><h5 id="最大的不同是语法模板的编写"><a href="#最大的不同是语法模板的编写" class="headerlink" title="最大的不同是语法模板的编写"></a>最大的不同是语法模板的编写</h5><p>react是通过JSX渲染模板。而vue是通过一种拓展的HTML语法进行渲染：vue看起来更像是已经给你搭建好了房子，你所做的只需要把它装饰得更美丽；而react更像搭积木，偏向于将功能一个一个组件化独立出来。</p>
<p><strong>除了框架本质的不一样</strong>，两者之间还有许多不一样的地方，比如：</p>
<p><strong>渲染过程</strong>–在vue中可以只单独渲染发生变化的组件，但是react需要将所有组件重新渲染；</p>
<p><strong>数据流</strong>–在vue中通过v-model可以实现数据的双向绑定，而react中仅有单向数据流；</p>
<p><strong>数据监听</strong>–vue中通过比较算法（diff）比较VDOM，监听变化的dom，但是如果没有设立设置key进行过程优化，可能会有大量VDOM重新渲染，然而react就不会发生此类情况，因为react强调数据的不可变。</p>
<p>当然除了不同以外，vue和react还有许多<strong>相似的地方</strong>：</p>
<p>都支持<strong>组件化开发</strong>、都有<strong>VDOM</strong>、都<strong>支持props进行父子组件通信</strong>等。</p>
<hr>
<h4 id="基础比较："><a href="#基础比较：" class="headerlink" title="基础比较："></a>基础比较：</h4><p><strong>React</strong></p>
<ol>
<li>在**{}**中使用表达式or变量</li>
<li>主要使用<strong>JS语法</strong>进行条件渲染</li>
<li>数据流<strong>单向</strong>且自上而下传递：通过<strong>状态提升</strong>(即将需要共享的state移动到最近的共同父组件中)达到共享数据源的目的</li>
<li>推广了VDOM并创造了新的语法–<strong>JSX</strong>，允许开发者在js中书写HTML</li>
<li>props对于子组件来说是必须的，因为它依赖一个<strong>单一数据源作为它的状态</strong>；使用map()进行循环赋值/创建节点</li>
<li>父子组件数据通信主要采用props；跨层级组件传递数据主要通过context。特别是在子组件向父组件传递数据时一般采用<strong>回调函数</strong></li>
<li>创建应用使用<strong>create-react-app脚手架</strong></li>
<li>需要使用<strong>setState方法</strong>去更新状态</li>
</ol>
<p><strong>Vue</strong></p>
<ol>
<li>在![image-20221010150807677](React 与 Vue 的区别/image-20221010150807677.png)中使用表达式or变量</li>
<li>主要使用<strong>模板语法</strong>v-if/v-show进行条件渲染</li>
<li>数据<strong>双向</strong>绑定：通过<strong>v-model语法糖</strong>实现数据的双向绑定</li>
<li>使用的模版是普通的<strong>HTML</strong>，通过Vue来整合现有的系统是比较容易的，不需要整体重构</li>
<li>与props略有不同，他们一样是在组件中被定义，但<strong>Vue依赖于模版语法</strong>，可以通过v-for循环更高效地展示传入的数据等</li>
<li>父子组件传值主要使用props/$emit通信、获取属性和方法主要使用$refs/ref+$children/$parent；兄弟组件数据通信主要使用新建Vue实例通过$emit/$on+eventBus通信；跨层级组件间的通信主要使用provide/inject通信。特别是在子组件向父组件传递数据时一般采用<strong>事件</strong></li>
<li>创建应用使用<strong>vue-cli脚手架</strong></li>
<li>Vue中state对象并不是必须的，数据由data属性在Vue对象中进行管理，通过计算属性/深度监视中的<strong>getter&amp;setter方法</strong>更新data属性</li>
</ol>
<p><strong>Import：React与Vue中Import的含义类似，用法有略微不同</strong></p>
<ul>
<li>vue中的import只能用于导入组件/工具之类的文件</li>
</ul>
<p>![img](React 与 Vue 的区别/lALPDeC26jxUpm47zQM6_826_59.png_720x10000.jpg)</p>
<ul>
<li>react的import不仅可以导入组件和工具文件，还可以导入某个组件的某个功能函数，如下：add()为math.js中的一个功能函数</li>
</ul>
<p>![img](React 与 Vue 的区别/lALPDfmVYL2UfaEvzQF9_381_47.png_720x10000.jpg) </p>
<p><strong>Context ：React和Vue中都引入了provide的概念</strong></p>
<ul>
<li>react中，context用于简化值层层传递所有组件的繁琐，常用API有React.createContext/Context.Provider/Classs.contextType/Context.Consumer/Context.displayName</li>
</ul>
<p>![img](React 与 Vue 的区别/lALPDeREaOEKew3Mi80B0g_466_139.png_720x10000.jpg) </p>
<ul>
<li>vue中，数据之间的层层传递通常使用provide+inject进行</li>
</ul>
<p>父组件</p>
<p>![img](React 与 Vue 的区别/lALPDeREaOEpucrMrc0B0Q_465_173.png_720x10000.jpg) </p>
<p>子组件</p>
<p>![img](React 与 Vue 的区别/lALPDfmVYL3IiM0vzPk_249_47.png_720x10000.jpg) </p>
<p><strong>Refs：React中与Vue中均有Refs转发的概念，用法也基本一致</strong></p>
<p>refs主要用于将ref自动地通过组件传递到其一子组件的技巧。对于大多数应用中的组件来说，这通常不是必需的。但其对某些组件，尤其是可重用的组件库是很有用的。</p>
<p><strong>注意：</strong>　</p>
<ol>
<li>ref 加在普通的元素上，用this.$refs.（ref值） 获取到的是dom元素</li>
<li>ref 加在子组件上，用this.$refs.（ref值） 获取到的是组件实例，可以使用组件的所有方法。在使用方法的时候直接this.$refs.(ref值).方法()就可以使用了</li>
</ol>
<p>![img](React 与 Vue 的区别/lALPDgCwXgdovgnNAQzNAmU_613_268.png_720x10000.jpg)</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">学习笔记</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2022 Emmilia
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="http://bestwing.me" target="_blank">Sw'blog</a> by Swing
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>


<script src="/js/main.js"></script>


    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


    <script type="text/javascript">
      window.onload = function(){
        document.getElementById("search").onclick = function(){
            console.log("search")
            search();
        }
      }
      function search(){
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','A1Pz-LKMXbrzcFg2FWi6','2.0.0');
      }
    </script>

  </div>
</body>
</html>